<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="http://rosindex.github.io/r/lsd_slam/github-tum-vision-lsd_slam/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src="/js/jquery.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/jquery-cookie-1.4.1/jquery.cookie.js" type="text/javascript"></script>

    <script type="text/javascript" src="/js/ga.js" async></script>
    <script type="text/javascript" src="/js/toc.js"></script>

    <!-- Pre-fetch search index files -->
    
    
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">


        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/rosindex/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="divider"></li>

                    <li class="disabled"><a href="/srvs/">Nodes</a></li>
                    <li class="disabled"><a href="/msgs/">Messages</a></li>
                    <li class="disabled"><a href="/srvs/">Services</a></li>
                    <li class="disabled"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li class="disabled"><a href="/categories/">Categories</a></li>
                    <li class="disabled"><a href="/tutorials">Tutorials</a></li>
                    <li class="disabled"><a href="/readmes">Readmes</a></li>
                    <li class="disabled"><a href="/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form action="/search/" role="form">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="q" placeholder="Search">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" type="submit"><span class="glyphicon glyphicon-search"></span></button>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">lsd_slam</li>
        <!--<li class="active">lsd_slam</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="kinetic-option" class="distro-button btn btn-xs btn-default" href="#kinetic" data="kinetic">
      <input type="radio" name="options" id="kinetic-radio" autocomplete="off"> kinetic
    </label>
  
    <label id="jade-option" class="distro-button btn btn-xs btn-default" href="#jade" data="jade">
      <input type="radio" name="options" id="jade-radio" autocomplete="off"> jade
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-primary" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  
    <label id="hydro-option" class="distro-button btn btn-xs btn-default" href="#hydro" data="hydro">
      <input type="radio" name="options" id="hydro-radio" autocomplete="off"> hydro
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="groovy" id="groovy-option" class="disabled older-distro-option"  href="#groovy">
          <a href="#groovy" data="groovy" id="groovy-button">groovy</a>
        </li>
      
        <li data="fuerte" id="fuerte-option" class="disabled older-distro-option"  href="#fuerte">
          <a href="#fuerte" data="fuerte" id="fuerte-button">fuerte</a>
        </li>
      
        <li data="electric" id="electric-option" class="disabled older-distro-option"  href="#electric">
          <a href="#electric" data="electric" id="electric-button">electric</a>
        </li>
      
        <li data="diamondback" id="diamondback-option" class="disabled older-distro-option"  href="#diamondback">
          <a href="#diamondback" data="diamondback" id="diamondback-button">diamondback</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/lsd_slam">lsd_slam</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/lsd_slam"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tum-vision-lsd_slam
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tum-vision-lsd_slam" role="menuitem" tabindex="-1" href="/r/lsd_slam/github-tum-vision-lsd_slam" data="github-tum-vision-lsd_slam">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tum-vision-lsd_slam
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-kinetic">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kinetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jade">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tum-vision/lsd_slam.git">https://github.com/tum-vision/lsd_slam.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2014-12-11
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNMAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/lsd_slam_core/github-tum-vision-lsd_slam">lsd_slam_core</a></td>
                    <td>UNKNOWN</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/lsd_slam_viewer/github-tum-vision-lsd_slam">lsd_slam_viewer</a></td>
                    <td>UNKNOWN</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h1 id="lsd-slam-large-scale-direct-monocular-slam">LSD-SLAM: Large-Scale Direct Monocular SLAM</h1>

<p>LSD-SLAM is a novel approach to real-time monocular SLAM. It is fully direct (i.e. does not use keypoints / features) and creates large-scale, 
semi-dense maps in real-time on a laptop. For more information see
<a href="http://vision.in.tum.de/lsdslam">http://vision.in.tum.de/lsdslam</a>
where you can also find the corresponding publications and Youtube videos, as well as some 
example-input datasets, and the generated output as rosbag or .ply point cloud.</p>

<h3 id="related-papers">Related Papers</h3>

<ul>
<li><p><strong>LSD-SLAM: Large-Scale Direct Monocular SLAM</strong>, <em>J. Engel, T. Schöps, D. Cremers</em>, ECCV '14</p></li>
<li><p><strong>Semi-Dense Visual Odometry for a Monocular Camera</strong>, <em>J. Engel, J. Sturm, D. Cremers</em>, ICCV '13</p></li>
</ul>

<h1 id="1-quickstart-minimal-setup">1. Quickstart / Minimal Setup</h1>

<p>First, install LSD-SLAM following 2.1 or 2.2, depending on your Ubuntu / ROS version. You don't need openFabMap for now.</p>

<p>Download the <a href="http://vmcremers8.informatik.tu-muenchen.de/lsd/LSD_room.bag.zip">Room Example Sequence</a> and extract it.</p>

<p>Launch the lsd_slam viewer:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    rosrun lsd_slam_viewer viewer
</code></pre></div>
<p>Launch the lsd_slam main ros node:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    rosrun lsd_slam_core live_slam image:=/image_raw camera_info:=/camera_info
</code></pre></div>
<p>Play the sequence:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    rosbag play ~/LSD_room.bag
</code></pre></div>
<p>You should see one window showing the current keyframe with color-coded depth (from live_slam), 
and one window showing the 3D map (from viewer). If for some reason the initialization fails 
(i.e., after ~5s the depth map still looks wrong), focus the depth map and hit 'r' to re-initialize.</p>

<h1 id="2-installation">2. Installation</h1>

<p>We tested LSD-SLAM on two different system configurations, using Ubuntu 12.04 (Precise) and ROS fuerte, or Ubuntu 14.04 (trusty) and ROS indigo. Note that building without ROS is not supported, however ROS is only used for input and output, facilitating easy portability to other platforms.</p>

<h2 id="2-1-ros-fuerte-ubuntu-12-04">2.1 ROS fuerte + Ubuntu 12.04</h2>

<p>Install system dependencies:</p>
<div class="highlight"><pre><code class="language-" data-lang="">sudo apt-get install ros-fuerte-libg2o liblapack-dev libblas-dev freeglut3-dev libqglviewer-qt4-dev libsuitesparse-dev libx11-dev
</code></pre></div>
<p>In your ROS package path, clone the repository:</p>
<div class="highlight"><pre><code class="language-" data-lang="">git clone https://github.com/tum-vision/lsd_slam.git lsd_slam
</code></pre></div>
<p>Compile the two package by typing:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosmake lsd_slam
</code></pre></div>
<h2 id="2-2-ros-indigo-ubuntu-14-04">2.2 ROS indigo + Ubuntu 14.04</h2>

<p><strong>We do not use catkin, however fortunately old-fashioned CMake-builds are still possible with ROS indigo.</strong>
For this you need to create a rosbuild workspace (if you don't have one yet), using:</p>
<div class="highlight"><pre><code class="language-" data-lang="">sudo apt-get install python-rosinstall
mkdir ~/rosbuild_ws
cd ~/rosbuild_ws
rosws init . /opt/ros/indigo
mkdir package_dir
rosws set ~/rosbuild_ws/package_dir -t .
echo "source ~/rosbuild_ws/setup.bash" &gt;&gt; ~/.bashrc
bash
cd package_dir
</code></pre></div>
<p>Install system dependencies:</p>
<div class="highlight"><pre><code class="language-" data-lang="">sudo apt-get install ros-indigo-libg2o ros-indigo-cv-bridge liblapack-dev libblas-dev freeglut3-dev libqglviewer-dev libsuitesparse-dev libx11-dev
</code></pre></div>
<p>In your ROS package path, clone the repository:</p>
<div class="highlight"><pre><code class="language-" data-lang="">git clone https://github.com/tum-vision/lsd_slam.git lsd_slam
</code></pre></div>
<p>Compile the two package by typing:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosmake lsd_slam
</code></pre></div>
<h2 id="2-3-openfabmap-for-large-loop-closure-detection-optional">2.3 openFabMap for large loop-closure detection [optional]</h2>

<p>If you want to use openFABMAP for large loop closure detection, uncomment the following lines in <code>lsd_slam_core/CMakeLists.txt</code> :</p>
<div class="highlight"><pre><code class="language-" data-lang="">#add_subdirectory(${PROJECT_SOURCE_DIR}/thirdparty/openFabMap)
#include_directories(${PROJECT_SOURCE_DIR}/thirdparty/openFabMap/include)
#add_definitions("-DHAVE_FABMAP")
#set(FABMAP_LIB openFABMAP )
</code></pre></div>
<p><strong>Note for Ubuntu 14.04:</strong> The packaged OpenCV for Ubuntu 14.04 does not include the nonfree module, which is required for openFabMap (which requires SURF features).
You need to get a full version of OpenCV with nonfree module, which is easiest by compiling your own version. 
We suggest to use the <a href="https://github.com/Itseez/opencv/releases/tag/2.4.8">2.4.8</a> version, to assure compatibility with the current indigo open-cv package.</p>

<h1 id="3-usage">3 Usage</h1>

<p>LSD-SLAM is split into two ROS packages, <code>lsd_slam_core</code> and <code>lsd_slam_viewer</code>. <code>lsd_slam_core</code> contains the full SLAM system, whereas <code>lsd_slam_viewer</code> is optionally used for 3D visualization.
Please also read <strong>General Notes for good results</strong> below.</p>

<h2 id="3-1-lsd_slam_core">3.1 <code>lsd_slam_core</code>
</h2>

<p>We provide two different usage modes, one meant for live-operation (<code>live_slam</code>) using ROS input/output, and one <code>dataset_slam</code> to use on datasets in the form of image files.</p>

<h3 id="3-1-1-using-live_slam">3.1.1 Using <code>live_slam</code>
</h3>

<p>If you want to directly use a camera.</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun lsd_slam_core live_slam /image:=&lt;yourstreamtopic&gt; /camera_info:=&lt;yourcamera_infotopic&gt;
</code></pre></div>
<p>When using ROS camera_info, only the image dimensions and the <code>K</code> matrix from the camera info messages will be used - hence the video has to be rectified.</p>

<p>Alternatively, you can specify a calibration file using </p>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun lsd_slam_core live_slam /image:=&lt;yourstreamtopic&gt; _calib:=&lt;calibration_file&gt;
</code></pre></div>
<p>In this case, the camera_info topic is ignored, and images may also be radially distorted. See the Camera Calibration section for details on the calibration file format.</p>

<h3 id="3-1-2-using-dataset_slam">3.1.2  Using <code>dataset_slam</code>
</h3>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun lsd_slam_core dataset_slam _files:=&lt;files&gt; _hz:=&lt;hz&gt; _calib:=&lt;calibration_file&gt;
</code></pre></div>
<p>Here, <code>&lt;files&gt;</code> can either be a folder containing image files (which will be sorted alphabetically), or a text file containing one image file per line. <code>&lt;hz&gt;</code> is the framerate at which the images are processed, and <code>&lt;calibration_file&gt;</code> the camera calibration file. </p>

<p>Specify <code>_hz:=0</code> to enable sequential tracking and mapping, i.e. make sure that every frame is mapped properly. Note that while this typically will give best results, it can be much slower than real-time operation.</p>

<h3 id="3-1-3-camera-calibration">3.1.3 Camera Calibration</h3>

<p>LSD-SLAM operates on a pinhole camera model, however we give the option to undistort images before they are being used. You can find some sample calib files in <code>lsd_slam_core/calib</code>.</p>

<h4 id="calibration-file-for-fov-camera-model">Calibration File for FOV camera model:</h4>
<div class="highlight"><pre><code class="language-" data-lang="">fx/width fy/height cx/width cy/height d
in_width in_height
"crop" / "full" / "none" / "e1 e2 e3 e4 0"
out_width out_height
</code></pre></div>
<p>Here, the values in the first line are the camera intrinsics and radial distortion parameter as given by the PTAM cameracalibrator, in_width and in_height is the input image size, and out_width out_height is the desired undistorted image size. The latter can be chosen freely, however 640x480 is recommended as explained in section 3.1.6. The third line specifies how the image is distorted, either by specifying a desired camera matrix in the same format as the first four intrinsic parameters, or by specifying "crop", which crops the image to maximal size while including only valid image pixels.</p>

<h4 id="calibration-file-for-pre-rectified-images">Calibration File for Pre-Rectified Images</h4>

<p>This one is without radial distortion correction, as a special case of ATAN camera model but without the computational cost:</p>
<div class="highlight"><pre><code class="language-" data-lang="">fx/width fy/height cx/width cy/height 0
width height
none
width height
</code></pre></div>
<h4 id="calibration-file-for-opencv-camera-model">Calibration File for OpenCV camera model:</h4>
<div class="highlight"><pre><code class="language-" data-lang="">fx fy cx cy k1 k2 p1 p2
inputWidth inputHeight
"crop" / "full" / "none" / "e1 e2 e3 e4 0"
outputWidth outputHeight
</code></pre></div>
<h3 id="3-1-4-useful-hotkeys">3.1.4 Useful Hotkeys</h3>

<ul>
<li><p><code>r</code>: Do a full reset</p></li>
<li><p><code>d / e</code>: Cycle through debug displays (in particular color-coded variance and color-coded inverse depth).</p></li>
<li><p><code>o</code>: Toggle on screen info display</p></li>
<li><p><code>m</code>: Save current state of the map (depth &amp; variance) as images to <code>lsd_slam_core/save/</code></p></li>
<li><p><code>p</code>: Brute-Force-Try to find new constraints. May improve the map by finding more constraints, but will block mapping for a while. </p></li>
<li><p><code>l</code>: Manually indicate that tracking is lost: will stop tracking and mapping, and start the re-localizer.</p></li>
</ul>

<h3 id="3-1-5-parameters-dynamic-reconfigure">3.1.5 Parameters (Dynamic Reconfigure)</h3>

<p>A number of things can be changed dynamically, using (for ROS fuerte)</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun dynamic_reconfigure reconfigure_gui 
</code></pre></div>
<p>or (for ROS indigo)</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun rqt_reconfigure rqt_reconfigure
</code></pre></div>
<p>Parameters are split into two parts, ones that enable / disable various sorts of debug output in <code>/LSD_SLAM/Debug</code>, and ones that affect the actual algorithm, in <code>/LSD_SLAM</code>.
Note that debug output options from <code>/LSD_SLAM/Debug</code> only work if lsd_slam_core is built with debug info, e.g. with <code>set(ROS_BUILD_TYPE RelWithDebInfo)</code>. </p>

<ul>
<li>
<code>minUseGrad</code>: [double] Minimal absolute image gradient for a pixel to be used at all. Increase if your camera has large image noise, decrease if you have low image-noise and want to also exploit small gradients.</li>
<li>
<code>cameraPixelNoise</code>: [double] Image intensity noise used for e.g. tracking weight calculation. Should be set larger than the actual sensor-noise, to also account for noise originating from discretization / linear interpolation.</li>
<li>
<code>KFUsageWeight</code>: [double] Determines how often keyframes are taken, depending on the overlap to the current keyframe. Larger -&gt; more keyframes.</li>
<li>
<code>KFDistWeight</code>: [double] Determines how often keyframes are taken, depending on the distance to the current Keyframe. Larger -&gt; more keyframes.</li>
<li>
<code>doSLAM</code>: [bool] Toggle global mapping component on/off. Only takes effect after a reset.</li>
<li>
<code>doKFReActivation</code>: [bool] Toggle keyframe re-activation on/off: If close to an existing keyframe, re-activate it instead of creating a new one. If false, the map will continually grow even if the camera moves in a relatively constrained area; If false, the number of keyframes will not grow arbitrarily.</li>
<li>
<code>doMapping</code>: [bool] Toggle entire keyframe creating / update module on/off: If false, only tracking stays active, which will prevent rapid motion or moving objects from corrupting the map.</li>
<li>
<code>useFabMap</code>: [bool] Use openFABMAP to find large loop-closures. Only takes effect after a reset, and requires LSD-SLAM to be compiled with FabMap.</li>
<li>
<code>allowNegativeIdepths</code>: [bool] Allow idepth to be (slightly) negative to avoid introducing a bias for far-away points.</li>
<li>
<code>useSubpixelStereo</code>: [bool] Compute subpixel-accurate stereo disparity.</li>
<li>
<code>useAffineLightningEstimation</code>: [bool] EXPERIMENTAL: Correct for global affine intensity changes during tracking. Might help if you have problems with auto-exposure.</li>
<li>
<code>multiThreading</code>: [bool] Toggle multi-threading of depth map estimation. Disable for less CPU usage, but possibly slightly less quality.</li>
<li>
<code>maxLoopClosureCandidates</code>: [int] Maximal number of loop-closures that are tracked initially for each new keyframe.</li>
<li>
<code>loopclosureStrictness</code>: [double] Threshold on reciprocal loop-closure consistency check, to be added to the map. Larger -&gt; more (possibly wrong) loop-closures.</li>
<li>
<code>relocalizationTH</code>: [double] How good a relocalization-attempt has to be to be accepted. Larger -&gt; more strict.</li>
<li>
<code>depthSmoothingFactor</code>: [double] How much to smooth the depth map. Larger -&gt; less smoothing.</li>
</ul>

<p>Useful for debug output are:</p>

<ul>
<li>
<code>plotStereoImages</code>: [bool] Plot searched stereo lines, and color-coded stereo-results. Nice visualization of what's going on, however drastically decreases mapping speed.</li>
<li>
<code>plotTracking</code>: [bool] Plot final tracking residual. Nice visualization of what's going on, however drastically decreases tracking speed.</li>
<li>
<code>continuousPCOutput</code>: [bool] Publish current keyframe's point cloud after each update, to be seen in the viewer. Nice visualization, however bad for performance and bandwidth.</li>
</ul>

<h3 id="3-1-6-general-notes-for-good-results">3.1.6 General Notes for Good Results</h3>

<ul>
<li>Use a <strong>global shutter</strong> camera. Using a rolling shutter will lead to inferior results.</li>
<li>Use a lens with a <strong>wide field-of-view</strong> (we use a 130° fisheye lens).</li>
<li>Use a <strong>high framerate</strong>, at least 30fps (depending on the movements speed of course). For our experiments, we used between 30 and 60 fps. </li>
<li>We recommend an image resolution of <strong>640x480</strong>, significantly higher or lower resolutions may require some hard-coded parameters to be adapted.</li>
<li>LSD-SLAM is a monocular SLAM system, and as such cannot estimate the absolute scale of the map. Further it requires <strong>sufficient camera translation</strong>: Rotating the camera without translating it at the same time will not work. Generally sideways motion is best - depending on the field of view of your camera, forwards / backwards motion is equally good. Rotation around the optical axis does not cause any problems.</li>
<li>During initialization, it is best to move the camera in a circle parallel to the image without rotating it. The scene should contain sufficient structure (intensity gradient at different depths).</li>
<li>
<strong>Adjust</strong> <code>minUseGrad</code> <strong>and</strong> <code>cameraPixelNoise</code> to fit the sensor-noise and intensity contrast of your camera.</li>
<li>If tracking / mapping quality is poor, try decreasing the keyframe thresholds <code>KFUsageWeight</code> and <code>KFDistWeight</code> slightly to generate more keyframes.</li>
<li>Note that LSD-SLAM is very much non-deterministic, i.e. results will be different each time you run it on the same dataset. This is due to parallelism, and the fact that small changes regarding when keyframes are taken will have a huge impact on everything that follows afterwards.</li>
</ul>

<h2 id="3-2-lsd-slam-viewer">3.2 LSD-SLAM Viewer</h2>

<p>The viewer is only for visualization. It can also be used to output a generated point cloud as .ply.
For live operation, start it using</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun lsd_slam_viewer viewer
</code></pre></div>
<p>You can use rosbag to record and re-play the output generated by certain trajectories. Record &amp; playback using</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosbag record /lsd_slam/graph /lsd_slam/keyframes /lsd_slam/liveframes -o file_pc.bag
rosbag play file_pc.bag
</code></pre></div>
<p>You should never have to restart the viewer node, it resets the graph automatically.</p>

<p>If you just want to lead a certain pointcloud from a .bag file into the viewer, you 
can directly do that using </p>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun lsd_slam_viewer viewer file_pc.bag
</code></pre></div>
<h3 id="3-2-1-useful-hotkeys">3.2.1 Useful Hotkeys</h3>

<ul>
<li><p><code>r</code>: Reset, will clear all displayed data.</p></li>
<li><p><code>w</code>: Print the number of points / currently displayed points / keyframes / constraints to the console.</p></li>
<li><p><code>p</code>: Write currently displayed points as point cloud to file lsd_slam_viewer/pc.ply, which can be opened e.g. in meshlab. Use in combination with sparsityFactor to reduce the number of points.</p></li>
</ul>

<h3 id="3-2-2-parameters-dynamic-reconfigure">3.2.2 Parameters (Dynamic Reconfigure)</h3>

<ul>
<li>
<code>showKFCameras</code>: Toggle drawing of blue keyframe camera-frustrums. min: False, default: True, max: True</li>
<li>
<code>showKFPointclouds</code>: Toggle drawing of point clouds for all keyframes. min: False, default: True, max: True</li>
<li>
<code>showConstraints</code>: Toggle drawing of red/green pose-graph constraints. min: False, default: True, max: True</li>
<li>
<code>showCurrentCamera</code>: Toggle drawing of red frustrum for the current camera pose. min: False, default: True, max: True</li>
<li>
<code>showCurrentPointcloud</code>: Toggle drawing of the latest point cloud added to the map. min: False, default: True, max: True</li>
<li>
<code>pointTesselation</code>: Size of points. min: 0.0, default: 1.0, max: 5.0</li>
<li>
<code>lineTesselation</code>: Width of lines. min: 0.0, default: 1.0, max: 5.0</li>
<li>
<code>scaledDepthVarTH</code>: log10 of threshold on point's variance, in the respective keyframe's scale. min: -10.0, default: -3.0, max: 1.0</li>
<li>
<code>absDepthVarTH</code>: log10 of threshold on point's variance, in absolute scale. min: -10.0, default: -1.0, max: 1.0</li>
<li>
<code>minNearSupport</code>: Only plot points that have #minNearSupport similar neighbours (higher values remove outliers). min: 0, default: 7, max: 9</li>
<li>
<code>cutFirstNKf</code>: Do not display the first #cutFirstNKf keyframe's point clouds, to remove artifacts left-over from the random initialization. min: 0, default: 5, max: 100</li>
<li>
<code>sparsifyFactor</code>: Only plot one out of #sparsifyFactor points, selected at random. Use this to significantly speed up rendering for large maps. min: 1, default: 1, max: 100</li>
<li>
<code>sceneRadius</code>: Defines near- and far clipping plane. Decrease to be able to zoom in more. min: 1, default: 80, max: 200</li>
<li>
<code>saveAllVideo</code>: Save all rendered images... only use if you know what you are doing. min: False, default: False, max: True</li>
<li>
<code>keepInMemory</code>: If set to false, the point cloud is only stored in OpenGL buffers, and not kept in RAM. This greatly reduces the required RAM for large maps, however also prohibits saving / dynamically changing sparsifyFactor and variance-thresholds. min: False, default: True, max: True</li>
</ul>

<h1 id="4-datasets">4 Datasets</h1>

<p>For convenience we provide a number of datasets, including the video, lsd-slam's output and the generated point cloud as .ply. See
<a href="http://vision.in.tum.de/lsdslam">http://vision.in.tum.de/lsdslam</a></p>

<h1 id="5-license">5 License</h1>

<p>LSD-SLAM is licensed under the GNU General Public License Version 3 (GPLv3), see <a href="http://www.gnu.org/licenses/gpl.html">http://www.gnu.org/licenses/gpl.html</a>.</p>

<p>For commercial purposes, we also offer a professional version under different licencing terms.</p>

<h1 id="6-troubleshoot-faq">6 Troubleshoot / FAQ</h1>

<p><strong>How can I get the live-pointcloud in ROS to use with RVIZ?</strong></p>

<p>You cannot, at least not on-line and in real-time. The reason is the following:</p>

<p>In the background, LSD-SLAM continuously optimizes the pose-graph, i.e., the poses of all keyframes. Each time a keyframe's pose changes (which happens all the time, if only by a little bit), all points from this keyframe change their 3D position with it. Hence, you would have to continuously re-publish and re-compute the whole pointcloud (at 100k points per keyframe and up to 1000 keyframes for the longer sequences, that's 100 million points, i.e., ~1.6GB), which would crush real-time performance.</p>

<p>Instead, this is solved in LSD-SLAM by publishing keyframes and their poses separately:
- keyframeGraphMsg contains the updated pose of each keyframe, nothing else.
- keyframeMsg contains one frame with it's pose, and - if it is a keyframe - it's points in the form of a depth map.</p>

<p>Points are then always kept in their keyframe's coodinate system: That way, a keyframe's pose can be changed without even touching the points. In fact, in the viewer, the points in the keyframe's coodinate frame are moved to a GLBuffer immediately and never touched again - the only thing that changes is the pushed modelViewMatrix before rendering. </p>

<p>Note that "pose" always refers to a Sim3 pose (7DoF, including scale) - which ROS doesn't even have a message type for.</p>

<p>If you need some other way in which the map is published (e.g. publish the whole pointcloud as ROS standard message as a service), the easiest is to implement your own Output3DWrapper.</p>

<p><strong>Tracking immediately diverges / I keep getting "TRACKING LOST for frame 34 (0.00% good Points, which is -nan% of available points, DIVERGED)!"</strong>
- double-check your camera calibration.
- try more translational movement and less roational movement</p>
</div></body></html>

            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>hydro</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-groovy">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>groovy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-fuerte">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>fuerte</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-electric">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>electric</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-diamondback">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>diamondback</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src="/js/distro_switch.js"></script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/rosindex">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">rosindex</span>
          </a>
          |
          <em>generated on 2016-07-04</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
