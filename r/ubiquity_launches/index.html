<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="http://rosindex.github.io/r/ubiquity_launches/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src="/js/jquery.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/jquery-cookie-1.4.1/jquery.cookie.js" type="text/javascript"></script>

    <script type="text/javascript" src="/js/ga.js" async></script>
    <script type="text/javascript" src="/js/toc.js"></script>

    <!-- Pre-fetch search index files -->
    
    
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">


        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/rosindex/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="divider"></li>

                    <li class="disabled"><a href="/srvs/">Nodes</a></li>
                    <li class="disabled"><a href="/msgs/">Messages</a></li>
                    <li class="disabled"><a href="/srvs/">Services</a></li>
                    <li class="disabled"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li class="disabled"><a href="/categories/">Categories</a></li>
                    <li class="disabled"><a href="/tutorials">Tutorials</a></li>
                    <li class="disabled"><a href="/readmes">Readmes</a></li>
                    <li class="disabled"><a href="/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form action="/search/" role="form">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="q" placeholder="Search">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" type="submit"><span class="glyphicon glyphicon-search"></span></button>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">ubiquity_launches</li>
        <!--<li class="active">ubiquity_launches</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="kinetic-option" class="distro-button btn btn-xs btn-default" href="#kinetic" data="kinetic">
      <input type="radio" name="options" id="kinetic-radio" autocomplete="off"> kinetic
    </label>
  
    <label id="jade-option" class="distro-button btn btn-xs btn-default" href="#jade" data="jade">
      <input type="radio" name="options" id="jade-radio" autocomplete="off"> jade
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-primary" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  
    <label id="hydro-option" class="distro-button btn btn-xs btn-default" href="#hydro" data="hydro">
      <input type="radio" name="options" id="hydro-radio" autocomplete="off"> hydro
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="groovy" id="groovy-option" class="disabled older-distro-option"  href="#groovy">
          <a href="#groovy" data="groovy" id="groovy-button">groovy</a>
        </li>
      
        <li data="fuerte" id="fuerte-option" class="disabled older-distro-option"  href="#fuerte">
          <a href="#fuerte" data="fuerte" id="fuerte-button">fuerte</a>
        </li>
      
        <li data="electric" id="electric-option" class="disabled older-distro-option"  href="#electric">
          <a href="#electric" data="electric" id="electric-button">electric</a>
        </li>
      
        <li data="diamondback" id="diamondback-option" class="disabled older-distro-option"  href="#diamondback">
          <a href="#diamondback" data="diamondback" id="diamondback-button">diamondback</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/ubiquity_launches">ubiquity_launches</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/ubiquity_launches"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-ubiquity_launches
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-ubiquity_launches" role="menuitem" tabindex="-1" href="/r/ubiquity_launches/github-UbiquityRobotics-ubiquity_launches" data="github-UbiquityRobotics-ubiquity_launches">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-ubiquity_launches
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-kinetic">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kinetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jade">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/UbiquityRobotics/ubiquity_launches.git">https://github.com/UbiquityRobotics/ubiquity_launches.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">0.2.1</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2016-02-19
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ubiquity_launches/github-UbiquityRobotics-ubiquity_launches">ubiquity_launches</a></td>
                    <td>0.2.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h1 id="ubiquity_launches-launch-file-repository">
<code>ubiquity_launches</code> Launch File Repository</h1>

<p><a href="https://travis-ci.org/UbiquityRobotics/ubiquity_launches"><img src="https://travis-ci.org/UbiquityRobotics/ubiquity_launches.svg?branch=master" alt="Build Status"></a></p>

<h2 id="development-overview">Development Overview</h2>

<p>All of the Ubiquity robots use
<a href="http://www.ros.org/">ROS</a> (Robot Operating System).
ROS breaks a robot application into a multitude of ROS
nodes (i.e. processes) running on one or more processors
that communicate with one another via internet protocols.</p>

<p>The usual method for teaching people to develop ROS robot
applications is to point them at some ROS tutorials and say
"go at it".  Unfortunately, this is a little bit dumping
buckets of blood into shark infested waters and going for
a little swim.  At Ubiquity Robotics, we want robot application
developers to have a much less traumatic experience.  For
this reason, we have invested a great deal of effort to
make ROS robot application development as easy as possible.</p>

<p>The reality is that setting up a workable software
development environment for developing ROS applications
is actually pretty involved.  One major complication is
that the robot typically does not have a display, keyboard,
and mouse.  Even if it did, it not particularly easy to
walk around with the robot as it moves.  The more workable
solution is to develop software on a stationary platform
like a laptop or a desktop, and communicate with the robot
via a wireless internet connection.  A further complication,
is Ubiquity Robotics is using a Raspberry Pi 2 processor
with the ARM7 instruction set, whereas most laptops and
desktops use the x86 instruction set.  We have to make sure
that each machine gets the right instruction set.</p>

<p>The Ubiquity Robotics application development environment
assumes that there are two processors.  The robot processor
is attached to the robot and the development processor is
associated with either laptop or desktop computer.</p>

<p>Ubiquity Robotics currently uses a
<a href="https://www.raspberrypi.org/">Raspberry Pi Foundation</a>
<a href="https://www.raspberrypi.org/products/raspberry-pi-2-model-b/">Raspberry Pi 2 Model B</a>
for the robot processor.  Since "Raspberry Pi 2 Model B" is a
mouthful of words, we shorten it down to a more manageable "RasPi2".
The RasPi2 is a quad-core ARM Cortex-A7 CPU with 1GB of RAM,
with 4 USB Ports, an Ethernet port, a camera interface, and
a micro-SD card.  We plug a dual-band USB WiFi Dongle into
one of the USB port slots to provide wireless connectivity
with the development processor through a commercial
off-the-shelf WiFi router.</p>

<p>The development processor must be a 64-bit x86 hardware
architecture processor.  You can either run some flavor
of Ubuntu natively on the processor, or you can run a
different operating system (e.g. Windows, MacOS, Solaris,
etc.) and run <a href="https://www.virtualbox.org/">VirtualBox</a>
to run the Ubuntu operating system.  Neither 32-bit
processors nor other virtual machines (e.g. VMWare,  Parallels,
etc.) are supported.</p>

<p>ROS currently only runs under Ubuntu and its variants (e.g.
Kubuntu, Xubuntu, Lubuntu, etc.)  No other operating system
options are currently supported by the ROS community.
To be consistent, the VirtualBox image that we recommend that
you use has <a href="/http://lubuntu.net/">Lubuntu</a> installed on it.
We also install Lubuntu on the robot processor, just in case
you choose to plug a monitor/keyboard/mouse into the RasPi2.
Lubuntu is a very light weight window system that does not
over tax the RasPi2 robot processor.</p>

<p>We really encourage people not to cut corners when it comes
to setting up your WiFi network.  If you have heard the saying
that "a chain is only as strong as its weakest link", our
experience is that WiFi is the weak link in robotics.  We
strongly recommend that people use dual band
<a href="https://en.wikipedia.org/wiki/IEEE_802.11ac">802.11ac</a>
USB WiFi dongles to provide wireless technology.  Similarly,
we recommend that you invest in a superior dual-band WiFi
router.  You can spend an enormous amount of time tracking
down and eradicating flaky WiFi issues and it is better to
simply avoid the issues by using better hardware and better
antennas.</p>

<p>We use a technology called
<a href="https://en.wikipedia.org/wiki/Zero-configuration_networking">zeroconf</a>
to provide human readable names for the various processors on
the computer network.  Each robot processor and development processor
must have a unique host name and <strong>MUST</strong> run zeroconf.  The
<a href="https://en.wikipedia.org/wiki/Domain_Name_System">DNS</a> will
present the DNS names as <code>hostname.local</code> where, <code>hostname</code> is
the host name of the robot or development processor.</p>

<p>The ROS community extensively uses
<a href="https://en.wikipedia.org/wiki/Secure_Shell">Secure Shell</a>
to communicate between computers.  The secure shell protocols
provide a secure and encrypted link between computers.
We require that password keys be properly set up between
the development processor and the robot processor such that
a secure link can be established without prompting the user for
a password.</p>

<p>Once we have secure shell properly installed, we can do three
things with it:</p>

<ul>
<li><p>The <code>roslaunch</code> program can launch ROS nodes (i.e. processes)
via secure shell.</p></li>
<li><p>We use the secure shell to do X11 protocol forwarding.
X11 a fairly old (but reliable) technology for doing remote
window access.  Using X11 protocol forwarding, we can debug
a program running on the robot processor with windows that
show up on the development processor.</p></li>
<li><p>We can use secure shell to remotely mount a chunk of the
file system from the robot processor onto the development
processor.  This allows you to use editors and tools on
development system to develop robot code.  There are requirements
on how all the files are organized on both machines, but
when all the rules are followed, you can easily build
the same ROS packages on both your development processor and
robot processor without any major issues.</p></li>
</ul>

<p>The secure shell technology is very useful, but requires some
effort to set up properly.</p>

<p>Lastly, we have an entire architecture for structuring ROS launch
files.  A ROS Launch file is a sequence of one or more files in
XML format, that when fed into the <code>roslaunch</code> program cause all
of the ROS nodes needed to run a robot to be started.  The goal
of the architecture is:</p>

<ul>
<li><p>Sharable: The launch files are shared among one another.</p></li>
<li><p>Platform Neutral: The launch files can be used for more than on
robot platform.</p></li>
<li><p>Complete: Only one top level robot launch file is specified to
start your robot and any ancillary visualization tools need for
the your robot application.</p></li>
</ul>

<p>{Summary here}</p>

<h2 id="development-environment-details">Development Environment Details</h2>

<p>This is where we go through the steps required to set up the
Ubiquity ROS development environment.  This is currently
broken into a bunch of steps.  Eventually, most of these
steps will be more automated.</p>

<h3 id="initial-setup">Initial setup:</h3>

<p>We are going to assume that you are doing all of these instructions
from the comfort of your own development machine.  We further
assume that you can connect to the <code>ubuntu</code> user on your robot.
We further assume that you can already access the robot via
secure shell.</p>

<ol>
<li>
<p>Install some software on your development machine:</p>
<div class="highlight"><pre><code class="language-" data-lang="">sudo apt-get install -y ssh fuse sshfs
sudo apt-get install -y 
sudo gpasswd -a $USER fuse
</code></pre></div>
</li>
<li>
<p>Let's make sure that you can log into your robot via <code>ssh</code>.
Please replace ROBOT with your robot host name:</p>
<div class="highlight"><pre><code class="language-" data-lang="">ssh ubuntu@ROBOT.local echo hello
# You will probably be prompted for the `ubuntu` account
# password (usually `ubuntu`).  When done it will print
# out `hello`.
</code></pre></div>
</li>
<li>
<p>Create your new USER account on the development machine.
USER can be up to 32 characters of upper/lower case letters,
digits, and underscores:</p>
<div class="highlight"><pre><code class="language-" data-lang="">sudo adduser USER
# It will prompt you for account password.
# It will prompt for a bunch of account information.
</code></pre></div>
</li>
<li>
<p>Now log into your new USER account:</p>
<div class="highlight"><pre><code class="language-" data-lang="">su USER
# It will prompt you for your new password.
</code></pre></div>
</li>
<li>
<p>Now let's create the same USER account on the ROBOT
machine.</p>
<div class="highlight"><pre><code class="language-" data-lang="">ssh ubuntu@ROBOT.local
# You will probably be prompted for the `ubuntu` password.
# The prompt will probably change to `ubuntu@ROBOT`.
sudo adduser USER
# As before, it will for the `ubuntu` password.
# Please fill in the rest of the account information
sudo addgroup USER video
exit
# This should return you to the development processor.
# Now verify that you can log in as USER on the
# robot processor:
ssh USER@ROBOT.local echo yippee
# You should be prompted for the USER password.
# If everything worked, you should `yippee` printed out.
</code></pre></div>
</li>
</ol>

<p>That should get the USER account built on the robot
   processor with access to the <code>video</code> group.</p>

<h3 id="password-free-secure-shell">Password Free Secure Shell</h3>

<p>Setting up Secure Shell to operate without prompting you for
passwords all the time is a requirement.</p>

<ol>
<li>
<p>Generate a public/private key on the development machine:</p>
<div class="highlight"><pre><code class="language-" data-lang="">if [ ! -f ~/.ssh/id_rsa ] ; then ssh-keygen -t ras ; fi
</code></pre></div>
</li>
</ol>

<p>If you already have an RSA public/private key, this
   line will return with no further prompting and you need
   not continue.  If you do get a prompt, it will probably
   look like:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    Enter file in which to save the key (/home/USER/.ssh/id_rsa):
</code></pre></div>
<p>Just depress the <code>[ENTER]</code> key.  Next it will prompt for 
   a pass phrase:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    Enter passphrase (empty for no passphrase):
</code></pre></div>
<p>Again, depress the  <code>[Enter]</code> key.  It will prompt once again:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    Enter same passphrase again:
</code></pre></div>
<p>Again, depress the <code>[Enter]</code> key.  Finally, it will crunch
   on some numbers for a while, print out some more stuff and
   finish.</p>

<ol>
<li>
<p>Now we want to make sure that the development machine can
use secure shell to connect to itself without a password
prompt:</p>
<div class="highlight"><pre><code class="language-" data-lang="">chmod 644 ~/.ssh/authorizied_keys
cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
chmod 444 ~/.ssh/authorizied_keys
</code></pre></div>
</li>
</ol>

<p>Now to verify that we succeeded, try the following (notice
   that accent characters (`) are being used instead of single
   quotes (\') :</p>
<div class="highlight"><pre><code class="language-" data-lang="">    ssh `hostname`.local echo terrific
</code></pre></div>
<p>If everything worked, you should see <code>terrific</code> with no
   password prompt.</p>

<ol>
<li>
<p>Now we get to do the same thing over on the robot using the
exact same technology:</p>
<div class="highlight"><pre><code class="language-" data-lang="">sudo USER@ROBOT.local
# Prompt for USER password on ROBOT.
if [ ! -f ~/.ssh/id_rsa ] ; then ssh-keygen -t ras ; fi
</code></pre></div>
<p>Just depress the <code>[Enter]</code> key three times.        </p>
</li>
<li>
<p>Now we want to make sure that the robot can connect to itself
via secure shell without any password prompts:</p>
<div class="highlight"><pre><code class="language-" data-lang="">chmod 644 ~/.ssh/authorized_keys
cat ~/.ssh/id_ras.pub &gt;&gt; ~/.ssh/authorized_keys
chmod 444 ~/.ssh/authorized_keys
</code></pre></div>
</li>
</ol>

<p>Now we verify that we succeeded by (again accent characters,
   not single quote characters):</p>
<div class="highlight"><pre><code class="language-" data-lang="">    ssh `hostname`.local echo fantastic
</code></pre></div>
<p>There should be no prompt and <code>fantastic</code> should be printed out.</p>
<div class="highlight"><pre><code class="language-" data-lang="">    exit
</code></pre></div>
<p>This should return you to the development processor.</p>

<ol>
<li>
<p>Now we need to make it possible to log into the robot without
any prompt.</p>
<div class="highlight"><pre><code class="language-" data-lang="">ssh ROBOT.local chmod 644 .ssh/authorized_keys
cat ~/.ssh/id_rsa.pub | ssh ROBOT.local 'cat &gt;&gt; .ssh/authorized_keys'
ssh ROBOT.local chmod 444 .ssh/authorized_keys
</code></pre></div>
</li>
</ol>

<p>Now we verify that we succeeded:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    ssh ROBOT.local echo awesome
</code></pre></div>
<p>There should be no password prompt, and <code>awesome</code> should be printed out.</p>

<ol>
<li>Since there is no particular need for the robot processor
to log into the development machine, we do not do the symmetric
step for password free secure shell from the robot processor
to the development processor.</li>
</ol>

<p>That covers all of the password prompt removal configuration
of secure shell.</p>

<h3 id="x11-forwarding">X11 Forwarding</h3>

<p>In order to enable X11 forwarding via secure shell, we need
to edit the file <code>/etc/ssh/ssh_config</code> on both the development
processor and the robot processor.</p>

<ol>
<li>
<p>Edit <code>/etc/ssh/ssh_config</code> on the devolopment machine:</p>
<div class="highlight"><pre><code class="language-" data-lang="">sudo nano /etc/ssh/ssh_config
</code></pre></div>
</li>
</ol>

<p>Find the two lines:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    #   ForwardX11 yes
    #   ForwardX11Trusted yes
</code></pre></div>
<p>and remove the <code>[#]</code> characters to make them look as follows:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    #   ForwardX11 yes
    #   ForwardX11Trusted yes
</code></pre></div>
<p>Write the contents out using <code>[Ctr-O]</code> followed by exiting
   using <code>[Ctrl-X]</code> keys.</p>

<ol>
<li>
<p>Verify that X11 forwarding is working on the development machine.
Please notice the <code>-Y</code> option:</p>
<div class="highlight"><pre><code class="language-" data-lang="">ssh -Y ROBOT.local xterm
</code></pre></div>
</li>
</ol>

<p>An <code>xterm</code> window should pop up on the development processor
   display.  The prompt inside the xterm should say <code>USER@ROBOT:~</code>.
   With your mouse, click inside  <code>xterm</code> window and type:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    hostname
</code></pre></div>
<p>inside <code>xterm</code> window followed by the <code>[Enter]</code> key.  The response
   should be <code>ROBOT</code>.  Things are working.  Again, in the <code>xterm</code>
   window type:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    exit
</code></pre></div>
<p>and now the <code>xterm</code> window will go away.        </p>

<ol>
<li>
<p>Now we do the same edits over on the robot processor.  Type
the following being sure to specify the <code>-Y</code> option:</p>
<div class="highlight"><pre><code class="language-" data-lang="">ssh -Y ROBOT.local
sudo nano /etc/ssh/ssh_config
</code></pre></div>
</li>
</ol>

<p>Remove the <code>#</code> characters in front of <code>ForwardX11</code> and 
   <code>ForwardX11Trusted</code>.  Write everything out with <code>[Ctrl-O]</code>
   followed by <code>[Ctrl-X]</code>.  Please stay logged onto the
   robot processor:</p>

<ol>
<li>
<p>Testing that we got it write is done as follows:</p>
<div class="highlight"><pre><code class="language-" data-lang="">ssh -y ROBOT.local xterm
</code></pre></div>
</li>
</ol>

<p>will cause an xterm to pop up on the development processor.
   (Just for your information, the X11 protocol is being forwarded
   through two secure shell X11 protocol forwarders, since there
   no display on the robot processor.)  Dismiss the <code>xterm</code> window
   by typing <code>exit</code> in the <code>xterm</code> window.  Finally, exit from the
   robot processor by typing:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    exit
</code></pre></div>
<p>That takes care of X11 forwarding issues.</p>

<h3 id="creating-the-catkin-work-spaces">Creating the Catkin Work Spaces</h3>

<p>We will create two identical catkin work spaces on both
the development processor and the robot processor.  We
assume that ROS has already been installed.</p>

<ol>
<li>
<p>On the development machine:</p>
<div class="highlight"><pre><code class="language-" data-lang="">mkdir -p ~/catkin_ws/src
</code></pre></div>
</li>
<li>
<p>Now we want to populate the work space with 4 ROS packages:</p>
<div class="highlight"><pre><code class="language-" data-lang="">cd ~/cakin_ws/src
git clone https://github.com/UbiquityRobotics/ubiquity_launches.git
git clone https://github.com/UbiquityRobotics/raspicam_node.git
git clone https://github.com/UbiquityRobotics/userland.git
git clone https://github.com/UbiquityRobotics/robot_upstart.git
source ~/.bashrc
</code></pre></div>
</li>
</ol>

<p>{Wayne: Make sure $ROS_PACKAGE_PATH is correct.}</p>

<ol>
<li>
<p>Now we initialize the Catkin work space:</p>
<div class="highlight"><pre><code class="language-" data-lang="">(cd ~/catkin_ws ; cakin_make)
</code></pre></div>
</li>
<li>
<p>Now we edit <code>~/.profile</code> to recognize the catkin workspace:</p>
<div class="highlight"><pre><code class="language-" data-lang="">nano ~/.profile
</code></pre></div>
</li>
</ol>

<p>Now we add the following code right before the line that
   says <code>#if running bash</code>:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    # Only `source /opt/ros/indigo/setup.bash` if we have not already done so.
    # We assume that this script does not change very often:
    if [ -d "/opt/ros/indigo/bin" ] ; then
        case ":$PATH:" in
        *:/opt/ros/indigo/bin:*) ;;
        *) source /opt/ros/indigo/setup.bash ;;
        esac
    fi

    # Only `source ~/catkin_ws/devel/setup` if it exists:
    if [ -f ~/catkin_ws/devel/setup.sh ] ; then
        source ~/catkin_ws/devel/setup.bash ;
    fi

    export ROS_CATKIN_WS=~/catkin_ws
    export ROS_HOSTNAME=`hostname`.local
    export ROS_MASTER_URI=http://`hostname`.local:11311
    export ROSLAUNCH_SSH_UNKNOWN=1
</code></pre></div>
<ol>
<li>
<p>Now we do exactly the same steps over on the robot:</p>
<div class="highlight"><pre><code class="language-" data-lang="">ssh ROBOT.local
mkdir -p ~/catkin_ws/src
cd ~/cakin_ws/src
git clone https://github.com/UbiquityRobotics/ubiquity_launches.git
git clone https://github.com/UbiquityRobotics/raspicam_node.git
git clone https://github.com/UbiquityRobotics/userland.git
(cd ~/catkin_ws ; cakin_make)
nano ~/.profile
</code></pre></div>
<p>Now edit in the exact same code from the previous step into the
same place in <code>~/.profile</code> and exit with <code>[Ctrl-O]</code> followed by
<code>[Ctrl-X]</code>.</p>
</li>
</ol>

<h3 id="using-sshfs">Using <code>sshfs</code>
</h3>

<p>The <code>sshfs</code> program is used to mount the <code>src</code> directory from
the robot processor over on to the development processor</p>

<p>To mount the robot <code>~/catkin_ws/src</code> on top of the local <code>~/catkin_ws/src</code>:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    sshfs -o nonempty -o idmap=user ROBOT.local:/home/`whoami`/catkin_ws/src ~/catkin_ws/src 
</code></pre></div>
<p>To unmount:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    fusermount -u ~/catkin_ws/src
</code></pre></div>
<h3 id="making-roscore-run-all-the-time">Making <code>roscore</code> Run All the Time</h3>

<p><em>{Wayne: make <code>n_forever</code> match <code>n_sleep_forever</code>.}</em></p>

<p>This is done using the following command:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    ssh ROBOT.local
    rosrun robot_upstart install --user=USER ubiquity_launches/n_sleep_forever/launch/n_sleep_forever.launch
    sudo service ubiquity start
</code></pre></div>
<h3 id="install-the-pudb-python-debugger">Install the <code>pudb</code> Python Debugger:</h3>

<p>Please do the following:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    sudo apt-get install -y python python-pip xterm
    sudo pip install pudb
</code></pre></div>
<h3 id="run-raspicam_view">Run <code>raspicam_view</code>
</h3>

<p>Please do the following on the development machine:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    rosrun ubiquity_launches raspicam_view
</code></pre></div>
<p>When <code>rqt_image_view</code> pops up please select the
<code>/n_raspicam/camera/image/compressed</code> topic.  When you are
done, please type <code>[Ctrl-C]</code>.</p>

<h2 id="launch-files">Launch Files</h2>

<p><a href="https://travis-ci.org/UbiquityRobotics/ubiquity_launches"><img src="https://travis-ci.org/UbiquityRobotics/ubiquity_launches.svg?branch=master" alt="Build Status"></a></p>

<p><code>ubiquity_launches</code> is a ROS <code>git</code> repository that contains ROS
<code>.launch</code> files and other associated ROS robot configuration files
(e.g. <code>.yaml</code>, <code>.urdf</code>, etc.)  In addition, there are shell
scripts that invoke the launch files.</p>

<p>A  <a href="http://wiki.ros.org/roslaunch">ROS <code>.launch</code> file</a> is used
used to start and configure one or more
<a href="http://wiki.ros.org/Nodes">ROS nodes</a>, which when properly
configured will result in the desired robot behavior.</p>

<p>By imposing some structure on the organization of these
<code>.launch</code> files, we improve the ability to reproduce
robot behaviors among all robot developers who share the
use of the <code>ubiquity_launches</code> launch files.</p>

<p>Both the shell scripts and the ROS launch files have some
additional documentation structure.  There is a program called
<a href="generate_launche_md.py"><code>generate_launches_md.py</code></a>
that scans the <code>ubiquity_launches</code> repository and generates
a single document called <a href="launches.md"><code>launches.md</code></a>.
This document provides a single location to find all of
documentation for the <code>ubiquity_launches</code> repository.
The format of the <code>launches.md</code> document is in
<a href="https://en.wikipedia.org/wiki/Markdown">markdown format</a></p>

<p>When <code>launches.md</code> file is served up by a git repository
management site (e.g.
<a href="https://en.wikipedia.org/wiki/GitHub">github</a>,
<a href="https://bitbucket.org/">bitbucket</a>, etc.)
it is converted into <a href="https://en.wikipedia.org/wiki/HTML">HTML</a>
so that it is easier to read in a web browser.
Please view
<a href="launches.md"><code>launches.md</code></a> to see how the generated
<code>ubiquity_launches</code> documentation is rendered in a web browser.</p>

<h2 id="download-and-install-ubiquity_launches-repository">Download and Install <code>ubiquity_launches</code> Repository</h2>

<p>The <code>ubquity_launches</code> repository is cloned into your catkin
workspace via the following:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    cd $ROS_CATKIN_WS/src
    git clone https://github.com/UbiquityRobotics/ubiquity_launches.git
</code></pre></div>
<p>It is strongly recommended that the <code>bin</code> directory of the
<code>ubiquity_launches</code> repository be placed in you execution path.
The preferred way to do this is by adding the following
somewhat arcane bash script code to your <code>~/.bashrc</code> file:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    # Only `source /opt/ros/indigo/setup.bash` if we have not already
    # done so.  We assume that this script does not change very often:
    if [ -d "/opt/ros/indigo/bin" ] ; then
        case ":$PATH:" in
        *:/opt/ros/indigo/bin:*) ;;
        *) source /opt/ros/indigo/setup.bash ;;
        esac
    fi

    # Put `.../ubiquity_launches/bin` in the path if it exists:
    if [ -d $ROS_CATKIN_WS/ubiquity_launches/bin ] ; then
        case ":$PATH:" in
        *:$ROS_CATKIN_WS/ubiquity_launches/bin:*) ;;
        *) export PATH=$PATH:$ROS_CATKIN_WS/ubiquity_launches/bin ;;
        esac
    fi
</code></pre></div>
<p>When you are done editing <code>~/.bashrc</code>, please run the command:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    source ~/.bashrc
</code></pre></div>
<h2 id="overall-architecture">Overall Architecture</h2>

<p>The current structure of the <code>ubiquity_launch</code> repository is
broken in a bunch of sub directories which have the following
naming conventions:</p>

<p>The top level directory structure is as follows:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    repository_name/
        README.md    # This document
        launches.md  # Aggregated 
        bin/         # Executable shell scripts
        n_*/         # Single ROS node launch files
        m_*/         # Multiple ROS node launch files
        rviz_*/      # RViz specific launch files
</code></pre></div>
<p>Where:</p>

<ul>
<li><p><code>README.md</code>:  <code>README.md</code> is this documentaton file.</p></li>
<li><p><code>launches.md</code>: <code>launches.md</code> is a generated documentation file.</p></li>
<li><p><code>bin</code>: The <code>bin</code> directory contains a bunch of executables shell
scripts that typically fire off a launch file.  It is expected
that you will place this <code>bin</code> directory in your path.</p></li>
<li><p><code>n_*</code>: The <code>n_*</code> directories contain the launch files and
configuration files needed to launch a single ROS Node.</p></li>
<li><p><code>m_*</code>: The <code>m_*</code> directories will launch Multiple ROS nodes.</p></li>
<li><p><code>rviz_*: The</code>rviz_*` directories are used to launch the RViz
program configured to view a corresponding robot program.
These launch files are typically executed on your laptop/desktop,
since most robots do not have a display head.</p></li>
</ul>

<p>Other directories and files will be added as needed.</p>

<h2 id="the-bin-sub-directory">The <code>bin</code> Sub-Directory</h2>

<p>The <code>bin</code> sub-directory contains a bunch of executables -- mostly
shell scripts.</p>

<p>The structure of an executable shell script in the <code>bin</code> sub-directory is:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    <span class="c">#!/usr/bin/env bash</span>

    <span class="c">##Summary: One line summary of shell script.</span>
    <span class="c">##Overview:</span>
    <span class="c">##  Line 1 of multi-line documentation.</span>
    <span class="c">##  ...</span>
    <span class="c">##  Line N of multi-line documentation.</span>

    roslaunch ...
</code></pre></div>
<p>The first line specifies that the file is a
<a href="https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29">bash</a> script.</p>

<p>All lines that start with <code>##</code> are scanned into the documentation
in <code>launches.md</code>.</p>

<p>The line:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    ##Summary: One line summary of shell script.
</code></pre></div>
<p>provides a single line summary of what the shell script is supposed to do.</p>

<p>The lines:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    ##Overview:
    ##  Line 1 of multi-line documentation.
    ##  ...
    ##  Line N of multi-line documentation.
</code></pre></div>
<p>provide a fuller description of the what the script file does.</p>

<p>The remaining lines are <code>bash</code> shell script commands.
Many (but not all) script files will contain a <code>roslaunch ...</code>
command that causes ROS process a ROS <code>.launch</code> file.</p>

<h2 id="ros-launch-file-issues">ROS Launch File Issues</h2>

<p>There are several issues about ROS launch files that need to
be discussed:</p>

<ul>
<li><p>The <code>&lt;arg&gt;</code> tag is used heavily needs to be fully understood.</p></li>
<li><p>There are two common launch file suffixes -- <code>.launch</code> and
<code>.launch.xml</code>.</p></li>
<li><p>Launch file parameterization allows the same launch files
to be used for different robot platforms and configurations.</p></li>
<li><p>How to add documentation to the a ROS launch file.</p></li>
</ul>

<h3 id="the-lt-arg-gt-tag">The <code>&lt;arg&gt;</code> Tag</h3>

<p>Some documentation for ROS launch files can be found by following
the hypertext links below:</p>

<ul>
<li><p><a href="http://wiki.ros.org/roslaunch">ROS Launch Overview</a> provides an
overview of the ROS launch file architecture.</p></li>
<li><p><a href="http://wiki.ros.org/roslaunch/XML">ROS launch XML file format</a>
provides documentation of the XML format used for writing
ROS launch files.</p></li>
<li><p><a href="http://wiki.ros.org/roslaunch/XML/arg">ROS launch <code>&lt;arg&gt;</code> tag</a>
is the documentation for the <code>&lt;arg ... &gt;</code> tag.</p></li>
</ul>

<p>The <code>&lt;arg&gt;</code> tag is singled out because it is heavily used in the
launch files to pass information between launch files.
If you do not understand the <code>&lt;arg&gt;</code> tag, you will not understand
the <code>ubiquity_launches</code> launch files.</p>

<p>The <code>&lt;arg&gt;</code> tag has three forms:</p>

<ul>
<li><p><code>&lt;arg name="required" /&gt;</code>: This specifies a launch file input name.
Think of this as a manditory and required input argument variable
for launch file.</p></li>
<li><p><code>&lt;arg name="optional" default="value" /&gt;</code>: This specifies a launch
file input name with a default value that will be used if not
is specified at "call" time.  Think of this as an optional input
argument for a launch file.</p></li>
<li><p><code>&lt;arg name="foo" value="bar" /&gt;</code>: This form has two different usages.
When at the level immediately inside of a <code>&lt;launch&gt; ... &lt;/launch&gt;</code>
pair, this form defines a convenience value that can be used to
improve overall legibility in a launch file.  Think of this as a
kind of a macro definition.  The second form occurs immediately
inside of a <code>&lt;include&gt; ... &lt;/include&gt;</code> pair.  This form is for
passing explicit arguments into another launch file.</p></li>
</ul>

<p>Huh? What is going on here?  Let's do some examples!  The example
below us Python as a metaphor for what is going on.  If you
do not know some basic Python, well, at least we tried.</p>

<p>Here is a chunk of Python code that defines a routine:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    def n_fiducial_slam(robot_base, fiducial_size=".150"):
      short = "a somewhat long string"
</code></pre></div>
<p>This function is named <code>n_fiducial_slam</code> and has two arguments --
<code>robot_base</code> and <code>fiducial_size</code>.  <code>robot_base</code> is a required
argument which if not present at routine call time will cause
a run-time error.  <code>fiducial_size</code> is an optional argument that
does not need to specified in the routine call, but it can be
specified if you want.  <code>short</code> is a local variable that can
be used to reduce typing.  The corresponding launch file syntax is:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    &lt;launch&gt;
      &lt;!-- Required arguments: --&gt;
      &lt;arg name="robot_base" /&gt;
        &lt;!--robot_base: Robot base (e.g. "magni", "loki", etc.) to use. --&gt;

      &lt;!-- Convenience arguments: --&gt;
      &lt;arg name="short value="a somewhat long string" /&gt;
        &lt;!--short_value: A short name for a longer string. --&gt;

      &lt;!-- Optional arguments: --&gt;
      &lt;arg name="fiducial_size" default=".200" /&gt;
        &lt;!--fiducial_size: Width of fiducial measured in meters. --&gt;
      ...

    &lt;/launch&gt;
</code></pre></div>
<p>The <code>&lt;include&gt; ... &lt;/include&gt;</code> tag pair is how one launch
file accesses another launch file.  It is similar to a
routine call.  In Python, the following line:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    n_fiducial_detect("loki", fiducial_size=".200")
</code></pre></div>
<p>would be written in launch file syntax as:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    ...

    &lt;include file=".../n_fiducial_detect.launch"&gt;
      &lt;arg name="robot_base" value="loki" /&gt;
      &lt;arg name="fiducial_size" value=".200" /&gt;
    &lt;/include&gt;

    ...
</code></pre></div>
<p>Now that you know how to set an argument, the only other
issue is how to access it.  That is done using substitution
arguments.  The syntax is:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    $(arg name)
</code></pre></div>
<p>where <code>name</code> is the argument name.  Using the "call" example
above, the following string:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    "base=$(arg robot_base) size=$(arg fiducial_size) short='$(arg short)'"
</code></pre></div>
<p>would expand to:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    "base=loki size=.200 short='a somewhat long string'"
</code></pre></div>
<p>The substitution syntax can only occur inside of XML attribute strings.</p>

<p>Finally, you pass arguments into launch files from the <code>roslaunch</code>
command via the following syntax:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    roslaunch ubiquity_launches n_fiducial_detect robot_base:="magni"
</code></pre></div>
<p>It is the <code>:=</code> is detected and conceptually converted into an
<code>&lt;arg&gt;</code> tag.  The line above would be represented in a launch
file as:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    &lt;include file="$(find ubiquity_launches)/.../n_fiducial_detect.launch"&gt;
      &lt;arg name="robot_base" value="magni" /&gt;
    &lt;/include&gt;
</code></pre></div>
<p>Hopefully this explanation of the <code>&lt;arg&gt;</code> tag is a little
more informative that the official ROS documentation.</p>

<h3 id="launch-file-suffixes">Launch File Suffixes:</h3>

<p>There are two ROS launch file suffixes:</p>

<ul>
<li><p><code>.launch</code>: This launch file will be discovered by the <code>roslaunch</code>
command via tab completion.</p></li>
<li><p><code>.launch.xml</code>: This launch file will not be discovered by
the <code>roslaunch</code> command tab completion facility.</p></li>
</ul>

<p>The <a href="http://wiki.ros.org/roslaunch"><code>roslaunch</code></a> command
has the following basic structure:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    roslaunch ROS_PACKAGE LAUNCH_NAME.launch
</code></pre></div>
<p>Basically, the <code>roslaunch</code> command searches a given ROS package
(i.e. <code>ROS_PACKAGE</code>) for a <code>.launch</code> file (i.e. <code>LAUNCH_NAME.launch</code>.)
One neat thing about <code>roslaunch</code> is that it implements
[tab completion](<a href="https://en.wikipedia.org/wiki/Command-line_completion">https://en.wikipedia.org/wiki/Command-line_completion</a>]
whereby it will reduce overall typing by allowing you few
characters of the package name and/or launch file name followed
by a tab character to cause the <code>roslaunch</code> to fill in as
many unambiguous characters as possible.  When it comes to finding
<code>.launch</code> files, <code>roslaunch</code> recursively visits all of the
directories and sub-directories in a ROS package and identifies
every file that ends in <code>.launch</code>.  It does not matter what
package sub-directory the .launch file is in, <code>roslaunch</code> will
find it.  It is really that simple. </p>

<p>A robot launch file repository will have many launch files.
Many of these file are likely to only be used via
the <code>&lt;include&gt;</code> tag in some other launch files.  These
launch files use the <code>.launch.xml</code> suffix, so that when
you are using tab completion for <code>roslaunch</code>, they do not
up as one of the possible completions.  That is all that
is going on here.  To let <code>roslaunch</code> show a launch file
via tab complete, use the <code>.launch</code> suffix; otherwise,
use the <code>.launch.xml</code> suffix to keep <code>roslaunch</code> from
showing the launch file via tab completion.  It is that easy.</p>

<h3 id="launch-file-parameterization">Launch File Parameterization</h3>

<p>The goal of a robot launch repository is to provide
high quality launch files that work across multiple
robot platforms and configurations.  It would be
possible to build monolithic launch files that do not
use any <code>&lt;include&gt;</code> directives.  The reason for not
doing that is because you would have lots of replicated
text across multiple launch files.  Fixing a problem
in one launch file would have to be manually propagated
to all the other launch files.  This would be a maintenance
nightmare.</p>

<p>The solution is to break the launch files into a number
of smaller launch files and create the robot configuration
via composition as described in the
<a href="http://wiki.ros.org/roslaunch/Architecture">roslaunch Architecture</a>.</p>

<p>To get additional reuse, the launch files need to be
parameterized such that the same launch file can be
used for multiple robots.</p>

<p>For example, the most common parameter is the robot base name.
This is called the <code>robot_base</code> parameter and it expected to be
given a robot base name (e.g. <code>loki</code>, <code>magni</code>, <code>botvac</code>, etc.)
This argument is used to select between different parameter
files (e.g. <code>loki.yaml</code> vs. <code>magni.yaml</code>, or <code>loki.urdf</code> vs.
<code>magni.urdf</code>, etc.)</p>

<h3 id="launch-file-documentation-structure">Launch File Documentation Structure</h3>

<p>The front portion of a launch file is structured as follows:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    &lt;launch&gt;
      &lt;!--Summary: One line summary of launch file --&gt;
      &lt;!--Overview: Multi-line overview 1
          Multi-line overview 2
          ...
          Multi-line overview N --&gt;

      &lt;!-- Required Arguments --&gt;
      &lt;arg name="input_name1" /&gt;
        &lt;!--input_name1: Documentation about `input_name1` --&gt;
      ...
      &lt;arg name="input_nameN" /&gt;
        &lt;!--input_nameN: Documentation about `input_nameN` --&gt;

      &lt;!-- Convenience Arguments --&gt;
      &lt;arg name="short_name1" value="short value 1" /&gt;
      ...
      &lt;arg name="short_nameN" value="short value N" /&gt;

      &lt;!-- Optional Arguments --&gt;
      &lt;arg name="option_name1" default="default value 1" /&gt;
        &lt;!--optional_nameN: Documentation about `optional_nameN` --&gt;
      ...
      &lt;arg name="option_nameN" default="default value N" /&gt;
        &lt;!--optional_nameN: Documentation about `optional_nameN` --&gt;

      ...

      &lt;!-- Rest of launch file goes here: --&gt;

    &lt;/launch&gt;
</code></pre></div>
<p>Each comment has the form:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    &lt;!--NAME: Documentation text --&gt;
</code></pre></div>
<p>where <code>NAME</code> is an alpha-numeric identifier with optional underscores.
These comments are found and processed by the <code>generate_launches.py</code>
program to extract documentation.  The <code>NAME</code> field either specifies
a launch file input argument, or the values <code>Summary</code> or <code>Overview</code>.
The documentation text is written using markdown formatting rules
(e.g. <em>italics</em>, <strong>bold</strong>, <code>fixed_pitch</code>, etc.)</p>

<h3 id="launch-sub-directory-structure">Launch Sub-Directory Structure</h3>

<p>Each launch sub-directory is organized as follows:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    LAUNCH_DIR_NAME/
        launch/   # Usually one `.launch` (or `.launch.xml`) file
        params/   # One or more `.yaml` (or other) parameter files
        rviz/     # One or more `.rviz` configuration files
        urdf/     # One or more `.urdf` configuration files
</code></pre></div>
<p>It is not clear why there is an additional level of sub-directory
for each different data type, but the turtlebot launch directories
have this structure, so it was decided to copy it.  (There may be
some subtle interaction with <a href="http://wiki.ros.org/bloom">ROS <code>bloom</code></a>
that is not yet fully understood.  Alternatively, it could be
monkey see, monkey do.)</p>

<h3 id="using-git-branches-to-experiment">Using <code>git</code> Branches to Experiment</h3>

<p>There is not much to say here.  If you want to tweak things
to experiment, you can use <code>git</code> to get a copy of the files,
create a branch and modify things to your hearts content.
If you can make a the case that you configuration works
better that what is currently in the <code>ubiquity_launches</code>
git repository, please submit a pull request back to the
master <code>ubiquity_launches</code> git repository.</p>

<h2 id="some-examples">Some Examples</h2>

<p>Below are three examples:</p>

<ul>
<li><p>A single node launch file (i.e. <code>n_*</code>.)</p></li>
<li><p>A multi-node launch file (i.e. <code>m_*</code>.)</p></li>
<li><p>An executable script file. (i.e. <code>bin/*</code>.)</p></li>
</ul>

<h3 id="n_-example">
<code>n_*</code> Example</h3>

<p>The launch file for <code>n_robot_state_publisher</code> can be found in
<code>.../n_robot_state_publisher/launch/n_robot_state_publisher.launch.xml</code>.
(There are uninteresting minor differences.)  The file is shown below:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    &lt;launch&gt;
      &lt;!--Summary: Launch the ROS `robot_state_publisher` node. --&gt;
      &lt;!--Overview: The launch file for this directory starts the ROS
          [`robot_state_publisher`](http://wiki.ros.org/robot_state_publisher)
          node.  This launch file selects the `.urdf` file based upon
          the `robot_base` argument.  The URDF files are stored in
          `...n_robot_state_publisher/urdf/{robot_base}.urf`. --&gt;

      &lt;!-- Required arguments: --&gt;
      &lt;arg name="robot_base" /&gt;
        &lt;!--robot_base: Robot base name (e.g. "magni", "loki", etc." --&gt;

      &lt;!-- Convenience arguments: --&gt;
      &lt;arg name="root" value="$(find ubiquity_launches)" /&gt;
      &lt;arg name="node"  value="robot_state_publisher" /&gt;

      &lt;!-- Optional arguments: --&gt;
      &lt;arg name="node_name" default="n_$(arg node)" /&gt;
        &lt;!--node_name: The name of the ROS node. --&gt;

      &lt;!-- Launch the robot state publisher:  --&gt;
      &lt;param name="robot_description"
       textfile="$(arg root)/n_$(arg node)/urdf/$(arg robot_base).urdf" /&gt;
      &lt;node name="$(arg node_name)"
       pkg="$(arg node)" type="state_publisher" /&gt;
    &lt;/launch&gt;
</code></pre></div>
<p>Note that we have a pretty standard order in which stuff is done:</p>

<ol>
<li><p>Naturally, the <code>&lt;launch&gt;</code> tag is first.</p></li>
<li><p>The <code>&lt;!--Summary: ... --&gt;</code> one line summary is next.</p></li>
<li><p>The <code>&lt;!--Overview: ... --&gt;</code> multi-line summary is next.</p></li>
<li><p>The <code>&lt;!-- Required arguments: --&gt;</code> are next.  In this case, there
is one required argument called <code>robot_base</code>.  <code>robot_base</code> is
one of the more common arguments.</p></li>
<li><p>The <code>&lt;!-- Convenience arguments: --&gt;</code> are next.  In this case,
both <code>root</code> and <code>rsp</code> are defined.  When <code>root</code> argument is
fully expanded, it will be something like
<code>/home/name/catkin_ws/src/ubiquity_launches</code>.  The <code>root</code> argument
is almost always present in an <code>n_*</code> launch file.  The <code>node</code>
argument is short hand for the package name.  In this case,
the package name is <code>robot_state_publisher</code>.  Using <code>$arg(node)</code>
takes 10 characters rather than 21 characters for
<code>robot_state_publisher</code>.</p></li>
<li><p>The <code>&lt;!-- Optional arguments: --&gt;</code> comes next.  In this example,
<code>node_name</code> is defined.  This defaults to <code>n_robot_state_publisher</code>.
Note that the <code>default="n_$(arg node)"</code> uses one of the previously
defined arguments.  It should be mentioned that <code>node_name</code> is
pretty much present for every <code>n_*</code> launch file.  This lets people
create multiple nodes using the same launch file, with each
node having a different name.</p></li>
<li><p>The <code>&lt;param ...&gt;</code> is next.  It specifies the parameter name and
a fully qualified path to the <code>.urdf</code> file.  On the Ubiquity
standard Raspberry Pi system image with <code>robot_base</code> set to <code>loki</code>,
<code>$(arg root)/n_$(arg node)/urdf/$(arg robot_base).urdf</code> expands to
<code>/home/ubuntu/catkin_ws/ubiquity_launches/n_robot_state_publisher/urdf/loki.urdf</code></p></li>
<li><p>The <code>&lt;node ...&gt;</code> is next.  It actually launches the ROS node.
The node name comes from <code>$(arg node_name)</code>, which will default
to <code>n_robot_state_publisher</code>.  The package name comes from
<code>$(arg node)</code> which expands to <code>robot_state_publisher</code>.</p></li>
<li><p>The <code>&lt;/launch&gt;</code> comes last.</p></li>
</ol>

<p>That should give you a pretty good understanding of how an <code>n_*</code>
style launch file tends to be structured.</p>

<h3 id="m_-example">
<code>m_*</code> Example</h3>

<p>The launch file for <code>m_joystick_teleop</code> can be found in
<code>.../m_joystick_teleop/launch/n_joystick_teleop.launch</code>.
(There are some uninteresting minor differences.)
The file is shown below:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    &lt;launch&gt;
      &lt;!--Summary: Start joystick remote control nodes. --&gt;
      &lt;!--Overview: The launch file for this directory fires off the
          joystick nodes to support the wireless PS2/XBox game controller
          for  driving the robot around.  This launch file requires a
          `robot_base` argument to specify which robot base is being
          used (e.g `loki`, `magni`, etc.) --&gt;

      &lt;!-- Required arguments: --&gt;
      &lt;arg name="robot_base" /&gt;
        &lt;!--robot_base: Base being used (e.g. "magni", "loki", etc.) --&gt;

      &lt;!-- Convenience arguments: --&gt;
      &lt;arg name="root" value="$(find ubiquity_launches)" /&gt;
      &lt;arg name="bsm"  value="$(arg robot_base)_serial_master" /&gt;
      &lt;arg name="rsp"  value="robot_state_publisher" /&gt;
      &lt;arg name="joy"  value="joy" /&gt;
      &lt;arg name="ttj"  value="teleop_twist_joy" /&gt;

      &lt;!-- Fire off each node: --&gt;
      &lt;include
       file="$(arg root)/n_$(arg bsm)/launch/n_$(arg bsm).launch.xml" /&gt;

      &lt;include
       file="$(arg root)/n_$(arg rsp)/launch/n_$(arg rsp).launch.xml"&gt;
        &lt;arg name="robot_base" value="$(arg robot_base)" /&gt;
      &lt;/include&gt;

      &lt;include
       file="$(arg root)/n_$(arg joy)/launch/n_$(arg joy).launch.xml" /&gt;

      &lt;include
       file="$(arg root)/n_$(arg ttj)/launch/n_$(arg ttj).launch.xml"&gt;
        &lt;arg name="robot_base" value="$(arg robot_base)" /&gt;
      &lt;/include&gt;
    &lt;/launch&gt;
</code></pre></div>
<p>Note that we have a pretty standard order in which stuff is done:</p>

<ol>
<li><p>The <code>launch</code>, <code>&lt;!--Summary: ...&gt;</code>, <code>&lt;--Overview: ...&gt;</code>, and
<code>&lt;!-- Required arguments --&gt;</code>, <code>&lt;!-- Convenience arguments --&gt;</code>
are basically the same as the <code>n_*</code> example.  There are a few
more convenience arguments.  Lastly, there are no 
<code>&lt;!-- Optional arguments: -&gt;</code></p></li>
<li>
<p>Next, we start each node.  Each node that is launched has its own
<code>&lt;include ...&gt;</code> tag.  In this example, 4 nodes are nodes being
launched, so there are for <code>&lt;include ... &gt;</code> tags.  Two of the
nodes require the <code>robot_base</code> argument, so they look as follows:</p>
<div class="highlight"><pre><code class="language-" data-lang="">  &lt;include
   file="$(arg root)/n_$(arg rsp)/launch/n_$(arg rsp).launch.xml"&gt;
    &lt;arg name="robot_base" value="$(arg robot_base)" /&gt;
  &lt;/include&gt;
</code></pre></div>
</li>
</ol>

<p>Notice how the <code>file</code> attribibute is specified.  <code>$(arg root)</code>
   expands to <code>$(find ubiquity_launces)</code> which further expands
   to <code>/home/ubuntu/catkin_ws/src/ubiquity_launches</code>.  The <code>$(arg rsp)</code>
   is a convenience argument that expands to <code>robot_state_publisher</code>.
   When fully expanded, the full path to the desired launch file
   is found.  The <code>&lt;arg ...&gt;</code> specifies <code>robot_base</code> value to be
   <code>$(arg robot_base)</code> which was passed into this launch file.  Thus,
   <code>robot_base</code> is being passed through.  The launch files without
   required arguments do not need any <code>&lt;arg ...&gt;</code> tags.</p>

<h3 id="bin-example">
<code>bin/*</code> Example</h3>

<p>Here is an example:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    <span class="c">#!/usr/bin/env bash</span>

    <span class="c">##Summary: Cause Loki to collect local costmap.</span>
    <span class="c">##Overview:</span>
    <span class="c">##  This program is run on the robot and starts up a Loki platform</span>
    <span class="c">##  that starts up robot that is running the both the PS3/XBox</span>
    <span class="c">##  joystick nodes and the fiducial detection and slam nodes.</span>
    <span class="c">##  The file is focused on generating a local cost map for viewing</span>
    <span class="c">##  using the `loki_rviz_local_costmap` program.</span>

    roslaunch ubiquity_launches m_fiducial_slam.launch.xml robot_base:<span class="o">=</span>loki
</code></pre></div>
<h2 id="some-extra-thoughts">Some Extra Thoughts</h2>

<p>Right now all the files in the <code>.../ubiquity_launches/bin</code> directory
have a platform base name embedded in them (e.g. <code>loki_raspicam</code>.)
This is kind of bogus.  It causes there to be a plethora of
programs in the <code>bin</code> directory. In order to solve this problem,
we need a way to identify the platform base name separate from the
program name.</p>

<p>For the desktop/laptop, the patform name should just be fetch
from the ROS parameters table.  Something like <code>/ur/base_name</code>
would be fine.  Thus, <code>loki_view_raspicam</code> would simplify to
<code>ur_view_raspicam</code> and would work for the <code>stage</code>, <code>loki</code>,
<code>magni</code> and <code>botvac</code> bases.  The launch file, would set the
base via appropriate </p>

<p>For the robot, we should just load the <code>/ur/base_name</code> parameter
from a known file.  There a multitude of different places to store
the base name and get it set.  We can also have a <code>/ur/variant</code>
parameter for different variants of the same basic base platform
(e.g. <code>botvac50</code>, <code>xv11</code>, etc.)  After the dust settles, the user
can just run <code>ur_raspicam</code> and it will bring up the RaspiCam
on the appropriate Loki, Magni, or BotVac platform.</p>
</div></body></html>

            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>hydro</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-groovy">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>groovy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-fuerte">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>fuerte</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-electric">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>electric</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-diamondback">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>diamondback</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src="/js/distro_switch.js"></script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/rosindex">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">rosindex</span>
          </a>
          |
          <em>generated on 2016-07-04</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
