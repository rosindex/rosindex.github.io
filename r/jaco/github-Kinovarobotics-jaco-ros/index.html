<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="http://rosindex.github.io/r/jaco/github-Kinovarobotics-jaco-ros/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src="/js/jquery.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/jquery-cookie-1.4.1/jquery.cookie.js" type="text/javascript"></script>

    <script type="text/javascript" src="/js/ga.js"></script>
    <script type="text/javascript" src="/js/toc.js"></script>

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">


        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/rosindex/rosindex.github.io/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <a class="btn btn-link" href="/about">About</a>
              <a class="btn btn-link" href="/packages">Packages</a>
              <a class="btn btn-link" href="/repos">Repos</a>
              <a class="btn btn-link" href="/contribute">Contribute</a>
              <a class="btn btn-link" href="/stats">Stats</a>
            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form action="/search/" role="form">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="q" placeholder="Search">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" type="submit"><span class="glyphicon glyphicon-search"></span></button>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">jaco</li>
        <!--<li class="active">jaco</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="jade-option" class="distro-button btn btn-xs btn-default" href="#jade" data="jade">
      <input type="radio" name="options" id="jade-radio" autocomplete="off"> jade
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-default" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  
    <label id="hydro-option" class="distro-button btn btn-xs btn-primary" href="#hydro" data="hydro">
      <input type="radio" name="options" id="hydro-radio" autocomplete="off"> hydro
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="groovy" id="groovy-option" class="disabled older-distro-option"  href="#groovy">
          <a href="#groovy" data="groovy" id="groovy-button">groovy</a>
        </li>
      
        <li data="fuerte" id="fuerte-option" class=" older-distro-option"  href="#fuerte">
          <a href="#fuerte" data="fuerte" id="fuerte-button">fuerte</a>
        </li>
      
        <li data="electric" id="electric-option" class="disabled older-distro-option"  href="#electric">
          <a href="#electric" data="electric" id="electric-button">electric</a>
        </li>
      
        <li data="diamondback" id="diamondback-option" class="disabled older-distro-option"  href="#diamondback">
          <a href="#diamondback" data="diamondback" id="diamondback-button">diamondback</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/jaco">jaco</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/jaco"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-Kinovarobotics-jaco-ros
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-Kinovarobotics-jaco-ros" role="menuitem" tabindex="-1" href="/r/jaco/github-Kinovarobotics-jaco-ros" data="github-Kinovarobotics-jaco-ros">
                    <span class="glyphicon glyphicon-star"></span>
                    github-Kinovarobotics-jaco-ros
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-jade">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>indigo</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        <div class="panel panel-default">
          
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/Kinovarobotics/jaco-ros.git">https://github.com/Kinovarobotics/jaco-ros.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">hydro-devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2014-08-19
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNMAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/jaco_demo/github-Kinovarobotics-jaco-ros">jaco_demo</a></td>
                    <td>1.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/jaco_driver/github-Kinovarobotics-jaco-ros">jaco_driver</a></td>
                    <td>1.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/jaco_model/github-Kinovarobotics-jaco-ros">jaco_model</a></td>
                    <td>1.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/jaco_msgs/github-Kinovarobotics-jaco-ros">jaco_msgs</a></td>
                    <td>1.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/jaco_ros/github-Kinovarobotics-jaco-ros">jaco_ros</a></td>
                    <td>1.0.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h1 id="jaco-ros">JACO-ROS</h1>

<p>The <code>jaco-ros</code> module provides a ROS interface for the Kinova Robotics JACO and MICO robotic manipulator arms. This module exposes the Kinova C++ hardware API through ROS. This documentation will usually refer to the JACO arm, but the instructions work with both the JACO and the MICO unless otherwise noted.</p>

<h2 id="overview">Overview</h2>

<p>The JACO API is exposed to ROS using a combination of actionlib (for sending trajectory commands to the arm), services (for instant control such as homing the arm or e-stop) and published topics (joint feedback).  The Arm may be commanded using either angular commands or Cartesian co-ordinates.</p>

<p>In addition, a transform publisher enables visualization of the arm via rviz.</p>

<p>There are three actionlib modules available: <code>arm_pose/arm_pose</code>, <code>joint_angles/arm_joint_angles</code>, and <code>fingers/finger_position</code>.  These server modules accept coordinates which are passed on to the Kinova JACO API for controlling the arm.</p>

<p>The services available are: <code>in/home_arm</code>, <code>in/stop</code>, and <code>in/start</code>.  These services require no input goals, and are intended for quick control of basic arm functions.  When called, home_arm will halt all other movement and return the arm to its "home" position.  The stop service is a software e-stop, which instantly stops the arm and prevents any further movement until the start service is called.</p>

<p>Published topics are: <code>out/cartesian_velocity, out/joint_velocity, out/finger_position, out/joint_angles, out/joint_state</code>, and <code>out/tool_position</code>.  The <code>cartesian_velocity</code> and <code>joint_velocity</code> are both subscribers which may be used to set the joint velocity of the arm.  The <code>finger_position</code> and <code>joint_angles</code> topics publish the raw angular position of the fingers and joints, respectively, in degrees.  The <code>joint_state</code> topic publishes via <code>sensor_msgs</code> the transformed joint angles in radians.  The <code>tool_position</code> topic publishes the Cartesian co-ordinates of the arm and end effector via <code>geometry_msgs</code>.</p>

<h2 id="jaco-ros-module-architecture">JACO-ROS Module Architecture</h2>

<p>The <code>jaco_arm_driver</code> node acts as an interface between the Kinova JACO C++ API and the various actionservers, message services and topics used to interface with the arm.</p>

<p>The <code>jaco_tf_updater</code> node subscribes to the jaco_arm_driver node to obtain current joint angle information from the node.  It then publishes a transform which may be used in visualization programs such as rviz.</p>

<h3 id="cartesian-control">Cartesian Control</h3>

<p>Cartesian control is accomplished via actionserver.  The Cartesian co-ordinates are published as a separate topic. The arm has a maximum reach of about 0.9m (90cm), so the "position" range is about +/-0.9 for all three dimensions.  The three wrist joints are capable of continuous rotation, and therefore capable of being commanded up to +/-174.5 rad. You may want to limit to +/-6.28 rad in software to prevent the joints from rotating excessively.</p>

<h4 id="cartesian-control-actionserver-topic,-command,-and-parameters">Cartesian Control Actionserver Topic, Command, and Parameters</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/arm_pose/arm_pose

Message format:
float64 position.x – end effector distance from the base in meters (left-right relative to base)
float64 position.y – end effector distance from the base in meters (forward-back relative to base) 
float64 position.z – end effector distance from the base in meters (up-down relative to base) 
float64 orientation.x – end effector quaternion orientation 
float64 orientation.y – end effector quaternion orientation
float64 orientation.z – end effector quaternion orientation
float64 orientation.w – end effector quaternion orientation

Parameters on the parameter server (can be set in the launch file):
/jaco_arm_driver/arm_pose/tf_prefix – prefix for the tf tree (needed for distinct tf 
    trees with multiple arms)
/jaco_arm_driver/arm_pose/stall_interval_seconds – duration over which the stall condition is tested
/jaco_arm_driver/arm_pose/stall_threshold – threshold over which the stall condition is tested 
    (e.g., if there is less than stall_threshold change in measurement over stall_interval_seconds, 
    the action will aborted due to a stall condition)
/jaco_arm_driver/arm_pose/rate_hz – rate at which the action is tested for completion, stall, or 
    other termination condition
/jaco_arm_driver/arm_pose/tolerance – tolerance between the measured position and the goal position 
    to complete the action
</code></pre></div>
<h4 id="published-topic-for-cartesian-position">Published Topic for Cartesian Position</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/out/tool_position

Message format:
float64 position.x – end effector distance from the base in meters (left-right relative to base) 
float64 position.y – end effector distance from the base in meters (forward-back relative to base) 
float64 position.z – end effector distance from the base in meters (up-down relative to base) 
float64 orientation.x – end effector quaternion orientation
float64 orientation.y – end effector quaternion orientation 
float64 orientation.z – end effector quaternion orientation
float64 orientation.w – end effector quaternion orientation
</code></pre></div>
<h3 id="angular-control">Angular Control</h3>

<p>Angular control is accomplished via actionserver.  The joint angles are published as two separate topics.</p>

<p>All the joints have a range limit.  Joints 1, 4, 5 and 6 have a range of -10,000 to +10,000 degrees.  Joint 2 has a range of +42 to +318 degrees.  Joint 3 has a range of +17 to +343 degrees.  Sending a command past these limits will cause the arm to move to its hard-wired limit, then stop.</p>

<h4 id="angular-control-actionserver-topic,-command,-and-parameters">Angular Control Actionserver Topic, Command, and Parameters</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/joint_angles/arm_joint_angles

Message format:
float32 joint1 – “base” joint angle in radians 
float32 joint2 – “shoulder” joint angle in radians 
float32 joint3 – “elbow” joint angle in radians 
float32 joint4 – first “wrist” joint angle in radians 
float32 joint5 – second “wrist” joint angle in radians 
float32 joint6 – “hand” joint angle in radians 

Parameters on the parameter server (can be set in the launch file):
/jaco_arm_driver/joint_angles/stall_interval_seconds – duration over which the stall condition is tested
/jaco_arm_driver/joint_angles/stall_threshold – threshold over which the stall condition is tested 
    (e.g., if there is less than stall_threshold change in measurement over stall_interval_seconds, 
    the action will aborted due to a stall condition)
/jaco_arm_driver/joint_angles/rate_hz – rate at which the action is tested for completion, stall, or 
    other termination condition
/jaco_arm_driver/joint_angles/tolerance – tolerance between the measured position and the goal position 
    to complete the action
</code></pre></div>
<h4 id="published-topics-for-angular-position-in-degrees">Published Topics for Angular Position in Degrees</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/out/joint_angles 

Message format:
float32 joint1 – “base” joint angle in degrees 
float32 joint2 – “shoulder” joint angle in degrees
float32 joint3 – “elbow” joint angle in degrees 
float32 joint4 – first “wrist” joint angle in degrees
float32 joint5 – second “wrist” joint angle in degrees
float32 joint6 – “hand” joint angle in degrees 
</code></pre></div>
<h4 id="published-topics-for-angular-position-in-radians">Published Topics for Angular Position in Radians</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/out/joint_state 

Message format:
string name – array containing the names of the joints 
float64[] position – array containing joint positions, in transformed radians, of the joints 
float64[] velocity – array containing the joint velocities (placeholder, contains no data) 
float64[] effort – array containing the joint forces in newtons (placeholder, contains no data) 
</code></pre></div>
<h3 id="finger-control">Finger Control</h3>

<p>Finger control is accomplished via actionserver.  The finger angles are published as a separate topic. The range of input for all three fingers on the JACO is approximately 0 (fully open) to 60 (fully closed). The two fingers on the MICO have a range of approximately 0 to 6400.</p>

<h4 id="finger-control-actionserver-topic,-command,-and-parameters">Finger Control Actionserver Topic, Command, and Parameters</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/fingers/finger_positions

Message format:
float32 finger1 – position of finger 1 in degrees 
float32 finger2 – position of finger 2 in degrees 
float32 finger3 – position of finger 3 in degrees 

Parameters on the parameter server (can be set in the launch file):
/jaco_arm_driver/fingers/stall_interval_seconds – duration over which the stall condition is tested
/jaco_arm_driver/fingers/stall_threshold – threshold over which the stall condition is tested 
    (e.g., if there is less than stall_threshold change in measurement over stall_interval_seconds, 
    the action will aborted due to a stall condition). This value typically needs to be changed between
    a MICO and a JACO arm.
/jaco_arm_driver/fingers/rate_hz – rate at which the action is tested for completion, stall, or 
    other termination condition
/jaco_arm_driver/fingers/tolerance – tolerance between the measured position and the goal position 
    to complete the action. This value typically needs to be changed between
    a MICO and a JACO arm (see the example launch files).
</code></pre></div>
<h4 id="published-topic-for-finger-position">Published Topic for Finger Position</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/out/finger_position 

Message format:
float32 finger1 – position of finger 1 in degrees
float32 finger2 – position of finger 2 in degrees
float32 finger3 – position of finger 3 in degrees (0 when using the two-fingered MICO)
</code></pre></div>
<h3 id="services">Services</h3>

<p>These services may be called at any time to enact basic functions on the arm.  They will override any other actions being carried out by the arm.</p>

<h4 id="homing-the-arm">Homing the Arm</h4>

<p>When called, this service will return the arm to its pre-programmed “home” position.  It is the equivalent of holding down the “home” button on the pendant controller. The service requires no input parameters, and simply reports when the arm has returned home.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Service Topic:  /jaco_arm_driver/in/home_arm
Result:  string homearm_result – a string containing the results of the home_arm service
</code></pre></div>
<h4 id="emergency-stop">Emergency Stop</h4>

<p>When called, this service will immediately stop the arm if it is moving, erase any trajectories still residing in the JACO arm’s FIFO, and enable a software e-stop flag.  This flag will prevent any further movement of the arm, including homing.  Joint angle feedback will continue to function.  The service requires no input parameters.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Topic:  /jaco_arm_driver/in/stop 
Result:  string stop_result – a string containing the results of the stop service 
</code></pre></div>
<h4 id="start">Start</h4>

<p>When called, this service will disable the software e-stop flag, and restore control of the arm.  The service requires no input parameters.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Topic:  /jaco_arm_driver/in/start   
Result:  string start_result – a string containing the results of the start service 
</code></pre></div>
<h3 id="joint-velocity-subscriber">Joint Velocity Subscriber</h3>

<p>Publishing messages to this topic allows for the arm to be controlled using joint velocity commands. For example, the following command will cause the arm to spin the sixth joint:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic pub -r 10 /jaco_arm_driver/in/joint_velocity jaco_msgs/JointVelocity 
"{joint1: 0.0, joint2: 0.0, joint3: 0.0, joint4: 0.0, joint5: 0.0, joint6: 10.0}" 
</code></pre></div>
<p>Note, using tab-completion to create this message will make sure that the command follows the correct syntax and format. If you just copy-and-paste this command into a terminal, it may not work.</p>

<h3 id="cartesian-velocity-subscriber">Cartesian Velocity Subscriber</h3>

<p>Publishing messages to this topic allows for the arm to be controlled using Cartesian velocity commands. For example, the following command will cause the arm to move in the positive z-direction (up).</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic pub -r 10 /jaco_arm_driver/in/cartesian_velocity geometry_msgs/TwistStamped 
"{header: {seq: 0, stamp: {secs: 0, nsecs: 0}, frame_id: ''}, 
twist: {linear: {x: 0.0, y: 0.0, z: 0.1}, angular: {x: 0.0, y: 0.0, z: 0.0}}}" 
</code></pre></div>
<p>Note, using tab-completion to create this message will make sure that the command follows the correct syntax and format. If you just copy-and-paste this command into a terminal, it may not work.</p>

<h2 id="launch-file">Launch file</h2>

<p>The jaco_arm.launch should be run prior to using the JACO arm.  It launches two nodes, <code>jaco_arm_driver</code> and <code>jaco_tf_updater</code>.  These nodes then perform a number of operations that prepare the arm for use.</p>

<p>On launch, the <code>jaco_arm_driver</code> announces all of the configurations stored in the JACO arm’s permanent memory.  These are settings that, currently, are most easily set using the Windows-only Kinova GUI.  The fingers may move during initialization, but the arm is not automatically homed. If the arm does not respond after initialization, it may need to be homed.</p>

<p>The <code>jaco_tf_updater</code> begins publishing transform data as soon as it becomes available from the <code>jaco_arm_driver node</code>.</p>

<h2 id="installation">Installation</h2>

<p>To make ros-jaco part of your workspace, follow these steps (assuming your workspace is setup following the standard conventions):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd ~/catkin_ws/src
git clone https://github.com/Kinovarobotics/jaco-ros.git jaco-ros
cd ~/catkin
catkin_make
</code></pre></div>
<p>To access the arm via usb copy the udev rule file <code>99-jaco-arm.rules</code> from <code>&lt;your_workspace&gt;/ros-jaco-arm/jaco_driver/udev</code> to <code>/etc/udev/rules.d/</code>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sudo cp jaco_driver/udev/99-jaco-arm.rules /etc/udev/rules.d/
</code></pre></div>
<p>If you would like the <code>jaco_arm_driver</code> and <code>jaco_tf_updater nodes</code> to launch automatically when ROS is started, copy the <code>jaco_arm.launch</code> file contained in the <code>/launch</code> folder into the relevant <code>/core.d</code> folder.</p>

<h3 id="using-multiple-arms">Using Multiple Arms</h3>

<p>This version of <code>jaco-ros</code> supports multiple arms. In order to use multiple arms you must set the the <code>serial_number</code> parameter for that arm and a <code>tf_prefix</code> for both the <code>arm_driver</code> node and the <code>tf_updater</code> node. For example, include the following lines in the launch file between <code>&lt;node pkg="jaco_driver" type="jaco_arm_driver" ...&gt;</code> and <code>&lt;/node&gt;</code>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;param name="serial_number" value="PJ00123456789012345" /&gt;
&lt;param name="arm_pose/tf_prefix" value="jaco_" /&gt;
</code></pre></div>
<p>And the following line in the launch file between <code>&lt;node pkg="jaco_driver" type="jaco_tf_updater" ...&gt;</code> and <code>&lt;/node&gt;</code>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;param name="tf_prefix" value="jaco_" /&gt;
</code></pre></div>
<p>If no serial number parameter is set, the node will simply try to connect to the JACO or MICO arm that is present.</p>

<h2 id="execution">Execution</h2>

<p>This package has been tested in Ubuntu 12.04 LTS with ROS Hydro. The 5.01.01 driver/API is included in the package; however, you should ensure that the firmware on the arm is up-to-date. Using old versions of the firmware may result in unexpected behavior.</p>

<h3 id="basics">Basics</h3>

<p>To “home” the arm</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosservice call jaco/home_arm 
</code></pre></div>
<p>To activate the e-stop (emergency stop) function</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosservice call jaco/stop 
</code></pre></div>
<p>To restore control of the arm</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosservice call jaco/start 
</code></pre></div>
<h3 id="joint-sensors">Joint Sensors</h3>

<p>To obtain the raw joint angles in degrees</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic echo jaco/joint_angles 
</code></pre></div>
<p>To obtain the “transformed” joint angles in radians in a standard <code>sensor_msgs</code> format</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic echo jaco/joint_state 
</code></pre></div>
<p>To obtain the finger angles in degrees</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic echo jaco/finger_position
</code></pre></div>
<p>To obtain the arm’s position in Cartesian units in a standard <code>geometry_msgs</code> format</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic echo jaco/tool_position 
</code></pre></div>
<h3 id="arm-control">Arm Control</h3>

<p>Several sample python script action clients are available for manually controlling the arm. These scripts are located in the <code>jaco_demo</code> package.</p>

<p>To set the joint angles using DH “transformed” angles in radians, use <code>joint_angle_workout.py</code></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosrun jaco_demo joint_angle_workout.py node_name random num        - randomly generate num joint angle sets
rosrun jaco_demo joint_angle_workout.py node_name file_path         - use poses from file
rosrun jaco_demo joint_angle_workout.py node_name j1 j2 j3 j4 j5 j6 - use these specific angles
e.g., rosrun jaco_demo joint_angle_workout.py jaco random 10
</code></pre></div>
<p>To set the arm position using Cartesian co-ordinates, use <code>cartesian_workout.py</code></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosrun jaco_demo cartesian_workout.py node_name random num          - randomly generate num poses
rosrun jaco_demo cartesian_workout.py node_name file_path           - use poses from file
rosrun jaco_demo cartesian_workout.py node_name x y z qx qy qz qw   - use that specific pose
e.g., rosrun jaco_demo cartesian_workout.py jaco -0.314 -0.339 0.600 -0.591 -0.519 0.324 0.525 
</code></pre></div>
<p>To set the finger positions, use <code>gripper_workout.py</code></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosrun jaco_demo gripper_workout.py node_name random num   - randomly generate num poses
rosrun jaco_demo gripper_workout.py jaco f1 f2 f3          - use that specific pose
rosrun jaco_demo gripper_workout.py mico f1 f2             - use that specific pose
e.g., rosrun jaco_demo gripper_workout.py jaco random 10
</code></pre></div>
<h2 id="known-limitations">Known Limitations</h2>

<ol>
<li><p>The <code>joint_state</code> topic currently reports only the arm position.  Velocity and Effort are placeholders for future compatibility.</p></li>
<li><p>When updating the firmware on the arm (e.g., using Jacosoft) the serial number will be set to "Not set" which will cause multiple arms to be unusable. The solution is to make sure that the serial number is reset after updating the arm firmware.</p></li>
<li><p>After using angular control, the arm may not respond to Cartesian commands (e.g., arm_pose or figer_position) until the arm has been homed.</p></li>
<li><p>Some virtualization software products are known to work well with this package, while others do not.  The issue appears to be related to proper handover of access to the USB port to the API.  Parallels and VMWare are able to do this properly, while VirtualBox causes the API to fail with a "1015" error.</p></li>
<li><p>With the latest firmware, the JACO arm will sag slightly when gripper commands are sent. This behavior has not been observed with the MICO arm.</p></li>
<li><p>Previously, files under <code>jaco-ros/jaco_driver/lib/i386-linux-gnu</code> had a bug which required uses 32-bit systems to manually copy them into devel or install to work. This package has not been tested with 32-bit systems and this workaround may still be required. 64-bit versions seem to be unaffected.</p></li>
<li><p>In certain cases, while commanding the MICO arm using angular commands, the force limits may be exceeded and the arm will stop.  If this occurs, consider increasing the force limits of your arm using JacoSoft, or use shorter movements that put less stress on the arm joints.</p></li>
</ol>
<h2 id="additional-resources">Additional Resources</h2>

<p>The transformation equations used to convert from the “DH Parameters” to physical angles are listed in the jaco_kinematics.pdf document, included as part of this package.</p>

<p>The Kinova JACO website: <a href="http://kinovarobotics.com/products/jaco-research-edition/">http://kinovarobotics.com/products/jaco-research-edition/</a></p>

<h2 id="report-a-bug">Report a Bug</h2>

<p>Any bugs, issues or suggestions may be sent to <a href="mailto:skynet@clearpathrobotics.com">skynet@clearpathrobotics.com</a></p>
</div></body></html>

            
          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-groovy">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>groovy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-fuerte">
    <div class="container-fluid">
      
        <div class="panel panel-default">
          
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/Kinovarobotics/jaco-ros.git">https://github.com/Kinovarobotics/jaco-ros.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2015-01-12
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNMAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/jaco_demo/github-Kinovarobotics-jaco-ros">jaco_demo</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/jaco_driver/github-Kinovarobotics-jaco-ros">jaco_driver</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/jaco_model/github-Kinovarobotics-jaco-ros">jaco_model</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/jaco_msgs/github-Kinovarobotics-jaco-ros">jaco_msgs</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h1 id="jaco-ros">JACO-ROS</h1>

<p>The <code>jaco-ros</code> module provides a ROS interface for the Kinova Robotics JACO, JACO2 (see limitations) and MICO robotic manipulator arms. This module exposes the Kinova C++ hardware API through ROS. This documentation will usually refer to the JACO arm, but the instructions work with both the JACO and the MICO unless otherwise noted.</p>

<h2 id="january-2015-release---what's-new">January 2015 Release - What's new</h2>
<div class="highlight"><pre><code class="language-text" data-lang="text">- New URDF model of the MICO, and various fixes to the JACO.
- Optional URDF-based TF publication (see documentation on launch files).
- Publication of joint velocities, see note in limitations section if the
values seem wrong.
- Access to force control of arms with torque sensors (start, stop and
  parameters).
</code></pre></div>
<h2 id="overview">Overview</h2>

<p>The JACO API is exposed to ROS using a combination of actionlib (for sending trajectory commands to the arm), services (for instant control such as homing the arm or e-stop) and published topics (joint feedback).  The Arm may be commanded using either angular commands or Cartesian co-ordinates.</p>

<p>In addition, two techniques are available to visualize the model in your ROS
environment.
The custom transform publisher of previous releases is still available, along
with a URDF-based approach using the JointStates output and robot_state_publisher.</p>

<p>There are three actionlib modules available: <code>arm_pose/arm_pose</code>, <code>joint_angles/arm_joint_angles</code>, and <code>fingers/finger_position</code>.  These server modules accept coordinates which are passed on to the Kinova JACO API for controlling the arm.</p>

<p>The services available are: <code>in/home_arm</code>, <code>in/stop</code>, and <code>in/start</code>.  These services require no input goals, and are intended for quick control of basic arm functions.  When called, home_arm will halt all other movement and return the arm to its "home" position.  The stop service is a software e-stop, which instantly stops the arm and prevents any further movement until the start service is called.</p>

<p>Published topics are: <code>out/cartesian_velocity, out/joint_velocity, out/finger_position, out/joint_angles, out/joint_state</code>, <code>out/tool_position</code>, and <code>out/tool_wrench</code> for robots with torque sensors.  The <code>cartesian_velocity</code> and <code>joint_velocity</code> are both subscribers which may be used to set the joint velocity of the arm.  The <code>finger_position</code> and <code>joint_angles</code> topics publish the raw angular position of the fingers and joints, respectively, in degrees.  The <code>joint_state</code> topic publishes via <code>sensor_msgs</code> the transformed joint angles in radians.  The <code>tool_position</code> topic publishes the Cartesian co-ordinates of the arm and end effector via <code>geometry_msgs</code>.</p>

<h2 id="jaco-ros-module-architecture">JACO-ROS Module Architecture</h2>

<p>The <code>jaco_arm_driver</code> node acts as an interface between the Kinova JACO C++ API and the various actionservers, message services and topics used to interface with the arm.</p>

<p>The <code>jaco_tf_updater</code> node subscribes to the jaco_arm_driver node to obtain current joint angle information from the node.  It then publishes a transform which may be used in visualization programs such as rviz.
This node is now optional and kept for compatibility issues. The URDF-based
approach is now preferred.</p>

<h3 id="cartesian-control">Cartesian Control</h3>

<p>Cartesian control is accomplished via actionserver.  The Cartesian co-ordinates are published as a separate topic. The arm has a maximum reach of about 0.9m (90cm), so the "position" range is about +/-0.9 for all three dimensions.  The three wrist joints are capable of continuous rotation, and therefore capable of being commanded up to +/-174.5 rad. You may want to limit to +/-6.28 rad in software to prevent the joints from rotating excessively.</p>

<h4 id="cartesian-control-actionserver-topic,-command,-and-parameters">Cartesian Control Actionserver Topic, Command, and Parameters</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/arm_pose/arm_pose

Message format:
float64 position.x – end effector distance from the base in meters (left-right relative to base)
float64 position.y – end effector distance from the base in meters (forward-back relative to base) 
float64 position.z – end effector distance from the base in meters (up-down relative to base) 
float64 orientation.x – end effector quaternion orientation 
float64 orientation.y – end effector quaternion orientation
float64 orientation.z – end effector quaternion orientation
float64 orientation.w – end effector quaternion orientation

Parameters on the parameter server (can be set in the launch file):
/jaco_arm_driver/arm_pose/tf_prefix – prefix for the tf tree (needed for distinct tf 
    trees with multiple arms)
/jaco_arm_driver/arm_pose/stall_interval_seconds – duration over which the stall condition is tested
/jaco_arm_driver/arm_pose/stall_threshold – threshold over which the stall condition is tested 
    (e.g., if there is less than stall_threshold change in measurement over stall_interval_seconds, 
    the action will aborted due to a stall condition)
/jaco_arm_driver/arm_pose/rate_hz – rate at which the action is tested for completion, stall, or 
    other termination condition
/jaco_arm_driver/arm_pose/tolerance – tolerance between the measured position and the goal position 
    to complete the action
</code></pre></div>
<h4 id="published-topic-for-cartesian-position">Published Topic for Cartesian Position</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/out/tool_position

Message format:
float64 position.x – end effector distance from the base in meters (left-right relative to base) 
float64 position.y – end effector distance from the base in meters (forward-back relative to base) 
float64 position.z – end effector distance from the base in meters (up-down relative to base) 
float64 orientation.x – end effector quaternion orientation
float64 orientation.y – end effector quaternion orientation 
float64 orientation.z – end effector quaternion orientation
float64 orientation.w – end effector quaternion orientation
</code></pre></div>
<h3 id="angular-control">Angular Control</h3>

<p>Angular control is accomplished via actionserver.  The joint angles are published as two separate topics.</p>

<p>All the joints have a range limit.  Joints 1, 4, 5 and 6 have a range of -10,000 to +10,000 degrees.  Joint 2 has a range of +42 to +318 degrees.  Joint 3 has a range of +17 to +343 degrees.  Sending a command past these limits will cause the arm to move to its hard-wired limit, then stop.</p>

<h4 id="angular-control-actionserver-topic,-command,-and-parameters">Angular Control Actionserver Topic, Command, and Parameters</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/joint_angles/arm_joint_angles

Message format:
float32 joint1 – “base” joint angle in radians 
float32 joint2 – “shoulder” joint angle in radians 
float32 joint3 – “elbow” joint angle in radians 
float32 joint4 – first “wrist” joint angle in radians 
float32 joint5 – second “wrist” joint angle in radians 
float32 joint6 – “hand” joint angle in radians 

Parameters on the parameter server (can be set in the launch file):
/jaco_arm_driver/joint_angles/stall_interval_seconds – duration over which the stall condition is tested
/jaco_arm_driver/joint_angles/stall_threshold – threshold over which the stall condition is tested 
    (e.g., if there is less than stall_threshold change in measurement over stall_interval_seconds, 
    the action will aborted due to a stall condition)
/jaco_arm_driver/joint_angles/rate_hz – rate at which the action is tested for completion, stall, or 
    other termination condition
/jaco_arm_driver/joint_angles/tolerance – tolerance between the measured position and the goal position 
    to complete the action
</code></pre></div>
<h4 id="published-topics-for-angular-position-in-degrees">Published Topics for Angular Position in Degrees</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/out/joint_angles 

Message format:
float32 joint1 – “base” joint angle in degrees 
float32 joint2 – “shoulder” joint angle in degrees
float32 joint3 – “elbow” joint angle in degrees 
float32 joint4 – first “wrist” joint angle in degrees
float32 joint5 – second “wrist” joint angle in degrees
float32 joint6 – “hand” joint angle in degrees 
</code></pre></div>
<h4 id="published-topics-for-angular-position-in-radians">Published Topics for Angular Position in Radians</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/out/joint_state 

Message format:
string name – array containing the names of the joints 
float64[] position – array containing joint positions, in transformed radians, of the joints 
float64[] velocity – array containing the joint velocities (placeholder, contains no data) 
float64[] effort – array containing the joint forces in newtons (placeholder, contains no data) 
</code></pre></div>
<h3 id="finger-control">Finger Control</h3>

<p>Finger control is accomplished via actionserver.  The finger angles are published as a separate topic. The range of input for all three fingers on the JACO is approximately 0 (fully open) to 60 (fully closed). The two fingers on the MICO have a range of approximately 0 to 6400.</p>

<h4 id="finger-control-actionserver-topic,-command,-and-parameters">Finger Control Actionserver Topic, Command, and Parameters</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/fingers/finger_positions

Message format:
float32 finger1 – position of finger 1 in degrees 
float32 finger2 – position of finger 2 in degrees 
float32 finger3 – position of finger 3 in degrees 

Parameters on the parameter server (can be set in the launch file):
/jaco_arm_driver/fingers/stall_interval_seconds – duration over which the stall condition is tested
/jaco_arm_driver/fingers/stall_threshold – threshold over which the stall condition is tested 
    (e.g., if there is less than stall_threshold change in measurement over stall_interval_seconds, 
    the action will aborted due to a stall condition). This value typically needs to be changed between
    a MICO and a JACO arm.
/jaco_arm_driver/fingers/rate_hz – rate at which the action is tested for completion, stall, or 
    other termination condition
/jaco_arm_driver/fingers/tolerance – tolerance between the measured position and the goal position 
    to complete the action. This value typically needs to be changed between
    a MICO and a JACO arm (see the example launch files).
</code></pre></div>
<h4 id="published-topic-for-finger-position">Published Topic for Finger Position</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">/jaco_arm_driver/out/finger_position 

Message format:
float32 finger1 – position of finger 1 in degrees
float32 finger2 – position of finger 2 in degrees
float32 finger3 – position of finger 3 in degrees (0 when using the two-fingered MICO)

The position state of the fingers is also available in the out/joint_state
topic.
</code></pre></div>
<h3 id="services">Services</h3>

<p>These services may be called at any time to enact basic functions on the arm.  They will override any other actions being carried out by the arm.</p>

<h4 id="homing-the-arm">Homing the Arm</h4>

<p>When called, this service will return the arm to its pre-programmed “home” position.  It is the equivalent of holding down the “home” button on the pendant controller. The service requires no input parameters, and simply reports when the arm has returned home.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Service Topic:  /jaco_arm_driver/in/home_arm
Result:  string homearm_result – a string containing the results of the home_arm service
</code></pre></div>
<h4 id="emergency-stop">Emergency Stop</h4>

<p>When called, this service will immediately stop the arm if it is moving, erase any trajectories still residing in the JACO arm’s FIFO, and enable a software e-stop flag.  This flag will prevent any further movement of the arm, including homing.  Joint angle feedback will continue to function.  The service requires no input parameters.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Topic:  /jaco_arm_driver/in/stop 
Result:  string stop_result – a string containing the results of the stop service 
</code></pre></div>
<h4 id="start">Start</h4>

<p>When called, this service will disable the software e-stop flag, and restore control of the arm.  The service requires no input parameters.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Topic:  /jaco_arm_driver/in/start   
Result:  string start_result – a string containing the results of the start service 
</code></pre></div>
<h4 id="start-and-stop-force-control">Start and Stop Force Control</h4>

<p>When called, these services will enable/disable cartesian force control of arms
with torque sensors.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Topics: /jaco_arm_driver/in/start_force_control
Result: Enable (or disable) force control for robots with torque sensors.
</code></pre></div>
<h4 id="setting-force-control-parameters">Setting Force Control Parameters</h4>

<p>When called, parameters of the cartesian force control algorithm will be changed
instantly.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Topic:  /jaco_arm_driver/in/set_force_control_params
Result: Instantly change force control parameters. See the Jaco API
documentation for details on the meaning of these parameters.
</code></pre></div>
<h3 id="joint-velocity-subscriber">Joint Velocity Subscriber</h3>

<p>Publishing messages to this topic allows for the arm to be controlled using joint velocity commands. For example, the following command will cause the arm to spin the sixth joint:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic pub -r 10 /jaco_arm_driver/in/joint_velocity jaco_msgs/JointVelocity 
"{joint1: 0.0, joint2: 0.0, joint3: 0.0, joint4: 0.0, joint5: 0.0, joint6: 10.0}" 
</code></pre></div>
<p>Note, using tab-completion to create this message will make sure that the command follows the correct syntax and format. If you just copy-and-paste this command into a terminal, it may not work.</p>

<h3 id="cartesian-velocity-subscriber">Cartesian Velocity Subscriber</h3>

<p>Publishing messages to this topic allows for the arm to be controlled using Cartesian velocity commands. For example, the following command will cause the arm to move in the positive z-direction (up).</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic pub -r 10 /jaco_arm_driver/in/cartesian_velocity geometry_msgs/TwistStamped 
"{header: {seq: 0, stamp: {secs: 0, nsecs: 0}, frame_id: ''}, 
twist: {linear: {x: 0.0, y: 0.0, z: 0.1}, angular: {x: 0.0, y: 0.0, z: 0.0}}}" 
</code></pre></div>
<p>Note, using tab-completion to create this message will make sure that the command follows the correct syntax and format. If you just copy-and-paste this command into a terminal, it may not work.</p>

<h2 id="launch-files">Launch files</h2>

<p>The jaco_driver package provides two launch files, depending on which robot you want to control.
The jaco_arm.launch and mico_arm.launch files should be run prior to using the JACO (or MICO) arm.  It launches the main driver node, <code>jaco_arm_driver</code>, and <code>jaco_tf_updater</code> in classic, non-URDF mode (see next section).  These nodes then perform a number of operations that prepare the arm for use.</p>

<p>On launch, the <code>jaco_arm_driver</code> announces all of the configurations stored in the arm’s permanent memory.  These are settings that, currently, are most easily set using the Windows-only Kinova GUI.  The fingers may move during initialization, but the arm is not automatically homed. If the arm does not respond after initialization, it may need to be homed.</p>

<h2 id="urdf-mode">URDF mode</h2>

<p>To enable URDF-based transform publication, set the "use_urdf" launch file
parameter to 'true'.
This can be done from the command line:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">roslaunch jaco_arm_driver [jaco|mico]_arm.launch use_urdf:=true
</code></pre></div>
<p>NOTE: The URDF model for the JACO2 arm will be available soon.</p>

<h2 id="custom-transform-publisher-(classic-and-default)-mode">Custom transform publisher (classic and default) mode</h2>

<p>The <code>jaco_tf_updater</code> begins publishing transform data as soon as it becomes available from the <code>jaco_arm_driver node</code>.</p>

<h2 id="installation">Installation</h2>

<p>To make ros-jaco part of your workspace, follow these steps (assuming your workspace is setup following the standard conventions):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd ~/catkin_ws/src
git clone https://github.com/Kinovarobotics/jaco-ros.git jaco-ros
cd ~/catkin
catkin_make
</code></pre></div>
<p>To access the arm via usb copy the udev rule file <code>99-jaco-arm.rules</code> from <code>&lt;your_workspace&gt;/ros-jaco-arm/jaco_driver/udev</code> to <code>/etc/udev/rules.d/</code>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sudo cp jaco_driver/udev/99-jaco-arm.rules /etc/udev/rules.d/
</code></pre></div>
<p>If you would like the <code>jaco_arm_driver</code> and <code>jaco_tf_updater nodes</code> to launch automatically when ROS is started, copy the <code>jaco_arm.launch</code> file contained in the <code>/launch</code> folder into the relevant <code>/core.d</code> folder.</p>

<h3 id="using-multiple-arms">Using Multiple Arms</h3>

<p>This version of <code>jaco-ros</code> supports multiple arms. In order to use multiple arms you must set the the <code>serial_number</code> parameter for that arm and a <code>tf_prefix</code> for both the <code>arm_driver</code> node and the <code>tf_updater</code> node. For example, include the following lines in the launch file between <code>&lt;node pkg="jaco_driver" type="jaco_arm_driver" ...&gt;</code> and <code>&lt;/node&gt;</code>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;param name="serial_number" value="PJ00123456789012345" /&gt;
&lt;param name="arm_pose/tf_prefix" value="jaco_" /&gt;
</code></pre></div>
<p>And the following line in the launch file between <code>&lt;node pkg="jaco_driver" type="jaco_tf_updater" ...&gt;</code> and <code>&lt;/node&gt;</code>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;param name="tf_prefix" value="jaco_" /&gt;
</code></pre></div>
<p>If no serial number parameter is set, the node will simply try to connect to the JACO or MICO arm that is present. In some cases the serial number may not be set in the arm; simply set the serial number parameter to "0."</p>

<h2 id="execution">Execution</h2>

<p>This package has been tested in Ubuntu 12.04 LTS with ROS Hydro. The 5.01.01 driver/API is included in the package; however, you should ensure that the firmware on the arm is up-to-date. Using old versions of the firmware may result in unexpected behavior.</p>

<h3 id="basics">Basics</h3>

<p>To “home” the arm</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosservice call jaco/home_arm 
</code></pre></div>
<p>To activate the e-stop (emergency stop) function</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosservice call jaco/stop 
</code></pre></div>
<p>To restore control of the arm</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosservice call jaco/start 
</code></pre></div>
<h3 id="joint-sensors">Joint Sensors</h3>

<p>To obtain the raw joint angles in degrees</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic echo jaco/joint_angles 
</code></pre></div>
<p>To obtain the “transformed” joint angles in radians in a standard <code>sensor_msgs</code> format</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic echo jaco/joint_state 
</code></pre></div>
<p>To obtain the finger angles in degrees</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic echo jaco/finger_position
</code></pre></div>
<p>To obtain the arm’s position in Cartesian units in a standard <code>geometry_msgs</code> format</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rostopic echo jaco/tool_position 
</code></pre></div>
<h3 id="arm-control">Arm Control</h3>

<p>Several sample python script action clients are available for manually controlling the arm. These scripts are located in the <code>jaco_demo</code> package.</p>

<p>To set the joint angles using DH “transformed” angles in radians, use <code>joint_angle_workout.py</code></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosrun jaco_demo joint_angle_workout.py node_name random num        - randomly generate num joint angle sets
rosrun jaco_demo joint_angle_workout.py node_name file_path         - use poses from file
rosrun jaco_demo joint_angle_workout.py node_name j1 j2 j3 j4 j5 j6 - use these specific angles
e.g., rosrun jaco_demo joint_angle_workout.py jaco random 10
</code></pre></div>
<p>To set the arm position using Cartesian co-ordinates, use <code>cartesian_workout.py</code></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosrun jaco_demo cartesian_workout.py node_name random num          - randomly generate num poses
rosrun jaco_demo cartesian_workout.py node_name file_path           - use poses from file
rosrun jaco_demo cartesian_workout.py node_name x y z qx qy qz qw   - use that specific pose
e.g., rosrun jaco_demo cartesian_workout.py jaco -0.314 -0.339 0.600 -0.591 -0.519 0.324 0.525 
</code></pre></div>
<p>To set the finger positions, use <code>grip_workout.py</code></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">rosrun jaco_demo grip_workout.py node_name random num   - randomly generate num poses
rosrun jaco_demo grip_workout.py jaco f1 f2 f3          - use that specific pose
rosrun jaco_demo grip_workout.py mico f1 f2             - use that specific pose
e.g., rosrun jaco_demo grip_workout.py jaco random 10
</code></pre></div>
<h2 id="known-limitations">Known Limitations</h2>

<ol>
<li><p>Partial support of the JACO2 arm. Control and raw state is available, but the
will be available later this month.
For now, the default "jaco_arm.launch" file can be used, but the visualization
or arm (or forward kinematics in URDF mode) will not be valid.</p></li>
<li><p>The <code>joint_state</code> topic currently reports only the arm position and
velocity. Effort is a placeholder for future compatibility. Depending on your
firmware version velocity values can be wrong. The behavior of the angle
velocity conversion can be changed with the "convert_joint_velocities" parameter
of jaco_arm_driver.</p></li>
<li><p>When updating the firmware on the arm (e.g., using Jacosoft) the serial number will be set to "Not set" which will cause multiple arms to be unusable. The solution is to make sure that the serial number is reset after updating the arm firmware.</p></li>
<li><p>After using angular control, the arm may not respond to Cartesian commands (e.g., arm_pose or figer_position) until the arm has been homed.</p></li>
<li><p>Some virtualization software products are known to work well with this package, while others do not.  The issue appears to be related to proper handover of access to the USB port to the API.  Parallels and VMWare are able to do this properly, while VirtualBox causes the API to fail with a "1015" error.</p></li>
<li><p>With the latest firmware, the JACO arm will sag slightly when gripper commands are sent. This behavior has not been observed with the MICO arm.</p></li>
<li><p>Previously, files under <code>jaco-ros/jaco_driver/lib/i386-linux-gnu</code> had a bug which required uses 32-bit systems to manually copy them into devel or install to work. This package has not been tested with 32-bit systems and this workaround may still be required. 64-bit versions seem to be unaffected.</p></li>
<li><p>In certain cases, while commanding the MICO arm using angular commands, the force limits may be exceeded and the arm will stop.  If this occurs, consider increasing the force limits of your arm using JacoSoft, or use shorter movements that put less stress on the arm joints.</p></li>
</ol>
<h2 id="additional-resources">Additional Resources</h2>

<p>The transformation equations used to convert from the “DH Parameters” to physical angles are listed in the jaco_kinematics.pdf document, included as part of this package.</p>

<p>The Kinova JACO website: <a href="http://kinovarobotics.com/products/jaco-research-edition/">http://kinovarobotics.com/products/jaco-research-edition/</a></p>

<h2 id="report-a-bug">Report a Bug</h2>

<p>Any bugs, issues or suggestions may be sent to <a href="mailto:skynet@clearpathrobotics.com">skynet@clearpathrobotics.com</a></p>
</div></body></html>

            
          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-electric">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>electric</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-diamondback">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>diamondback</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src="/js/distro_switch.js"></script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/rosindex">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">rosindex</span>
          </a>
          |
          <em>generated on 2015-01-30</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
