<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="http://rosindex.github.io/r/mtconnect/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src="/js/jquery.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/jquery-cookie-1.4.1/jquery.cookie.js" type="text/javascript"></script>

    <script type="text/javascript" src="/js/ga.js"></script>
    <script type="text/javascript" src="/js/toc.js"></script>

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">


        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/rosindex/rosindex.github.io/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <a class="btn btn-link" href="/about">About</a>
              <a class="btn btn-link" href="/packages">Packages</a>
              <a class="btn btn-link" href="/repos">Repos</a>
              <a class="btn btn-link" href="/contribute">Contribute</a>
              <a class="btn btn-link" href="/stats">Stats</a>
            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form action="/search/" role="form">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="q" placeholder="Search">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" type="submit"><span class="glyphicon glyphicon-search"></span></button>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">mtconnect</li>
        <!--<li class="active">mtconnect</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="jade-option" class="distro-button btn btn-xs btn-default" href="#jade" data="jade">
      <input type="radio" name="options" id="jade-radio" autocomplete="off"> jade
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-default" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  
    <label id="hydro-option" class="distro-button btn btn-xs btn-default" href="#hydro" data="hydro">
      <input type="radio" name="options" id="hydro-radio" autocomplete="off"> hydro
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="groovy" id="groovy-option" class="disabled older-distro-option"  href="#groovy">
          <a href="#groovy" data="groovy" id="groovy-button">groovy</a>
        </li>
      
        <li data="fuerte" id="fuerte-option" class=" older-distro-option"  href="#fuerte">
          <a href="#fuerte" data="fuerte" id="fuerte-button">fuerte</a>
        </li>
      
        <li data="electric" id="electric-option" class="disabled older-distro-option"  href="#electric">
          <a href="#electric" data="electric" id="electric-button">electric</a>
        </li>
      
        <li data="diamondback" id="diamondback-option" class="disabled older-distro-option"  href="#diamondback">
          <a href="#diamondback" data="diamondback" id="diamondback-button">diamondback</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/mtconnect">mtconnect</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/mtconnect"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-mtconnect-ros_bridge
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-mtconnect-ros_bridge" role="menuitem" tabindex="-1" href="/r/mtconnect/github-mtconnect-ros_bridge" data="github-mtconnect-ros_bridge">
                    <span class="glyphicon glyphicon-star"></span>
                    github-mtconnect-ros_bridge
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-jade">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>indigo</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>hydro</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-groovy">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>groovy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-fuerte">
    <div class="container-fluid">
      
        <div class="panel panel-default">
          
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/mtconnect/ros_bridge.git">https://github.com/mtconnect/ros_bridge.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">ROS_action_client</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2013-02-07
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNMAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/mtconnect_cnc_robot_example/github-mtconnect-ros_bridge">mtconnect_cnc_robot_example</a></td>
                    <td>UNKNOWN</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/mtconnect_msgs/github-mtconnect-ros_bridge">mtconnect_msgs</a></td>
                    <td>UNKNOWN</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/mtconnect_ros_bridge/github-mtconnect-ros_bridge">mtconnect_ros_bridge</a></td>
                    <td>UNKNOWN</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h2 id="python-adapter-for-mtconnect-c++-agent">Python Adapter for MTConnect C++ Agent</h2>

<p>This is a simple adapter library written in Python to support the ROS
robotics integration project. The adapter supports multiple connections,
heartbeats and the following MTConnect data item types:</p>

<ul>
<li><p>Event  - A simple data item that usually contains with either a controlled
       vocabulary like ControllerMode or Execution, or text like Program.</p></li>
<li><p>Sample - A numeric valued data item for values that are continuously changing
       like position, angle, or temperatures</p></li>
<li><p>ThreeDSample - A sample that represents a three dimensional position like
        a path position. The path is represented by a three space list or
        tuple: (1.0, 2.0, 3.0)</p></li>
<li><p>Condition - A condition is a data item that describes the current normal, fault, or
        warning state of a component for a certain type of problem. A warning is
        a situation that may self correct, whereas a fault needs manual intervention.
        Conditions assume a sweep of a set of error codes where the errors will be
        checked each time the adapter polls. This is usually how most PLCs operate
        and there is no specific message to say when an alarm becomes active or
        clears. If there is an alarm messaging mechanism, use the SimpleCondition.
        Conditions rely on a native code to distinguish themselves. Other systems
        can be used, but this is the current assumption of the agent for its
        condition management.</p></li>
<li><p>SimpleCondition - Similar to Condition, except that when the alarm is cleared, use
        the remove method with the code.</p></li>
</ul>
<h2 id="adapter-creation">Adapter Creation</h2>

<p>To create an adapter, import the Adapter from the mtconnect_adapter and add
data items. You need to tell it what host and port it should bind to. The default
port is 7878:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">adapter = Adapter(('0.0.0.0', 7878))
di = Event('event_1')
adapter.add_data_item(di)
adapter.start()
</code></pre></div>
<p>This creates an adapter, adds an Event and then starts the adapter. To change
values of the data item, you need to begin gathering data and then complete the
data gathering process to send all the data.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">adapter.begin_gather()
di.set_value('hello')
adapter.complete_gather()
</code></pre></div>
<p>Working with conditions are very similar to the events:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">c1 = SimpleCondition('c1')
adapter.add_data_item(c1)

...
</code></pre></div>
<p>Add a fault</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">adapter.begin_gather()
c1.add('fault', 'A fault', '123')
adapter.complete_gather()
</code></pre></div>
<p>And to clear the condition:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">adapter.begin_gather()
c1.remove('123')
adapter.complete_gather()
</code></pre></div>
<p>There are two additional arguments that are options, qualifier and severity.
The qualifier represents extra information like HIGH or LOW and the severity
is a native severity if available.</p>

<p>There are more examples in the simple_adapter.py.</p>

<h2 id="ros-example">ROS Example</h2>

<p>There is an example for the ROS turtlesim tutorial that subscribes to the ROS
poses and then sends them to the MTConnect agent as PATH_POSITION data items. 
To run the demo, install the turtlesim and then run the adapter: (this assumes
the python_adapter is cloned under ~/)</p>

<p>Install the turtle sim -- see ros wiki...</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">roscore&amp;
rosrun turtlesim turtlesim_node
</code></pre></div>
<p>There is an example for the ROS turtlesim tutorial that subscribes to the ROS
poses and then sends them to the MTConnect agent as PATH_POSITION data items. 
To run the demo, install the turtlesim and then run the adapter: (this assumes
the python_adapter is cloned under ~/)</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd ~/python_adapter/examples
python ros_adapter.py
</code></pre></div>
<p>Next, install the MTConnect agent in another directory:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd ~
git clone http://github.com/mtconnect/cppagent.git
mkdir agent_build
cd agent_build
cmake ../cppagent
make
</code></pre></div>
<p>Run the agent:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd ~/python_adapter/examples
~/agent_build/agent/agent debug
</code></pre></div>
<p>Now your done, test the agent:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">curl http://localhost:5000/current
</code></pre></div>
<p>You should see an MTConnect streams document with Availabity AVAILABLE and a PathPosition for the Path.</p>

<h2 id="simulator">Simulator</h2>

<p>The simulator directory contains a ruby script to simulate the functionality of a 
cnc with minimal information only required for the Robot control. The simulator
will process the steps required by the CNC assuming there is a robot that can accept
material related requests. The states will be similar to the states in the 
Bar Feeder project but adapted for to mimic a CNC cell. This technique can be 
used to simulate other MTConnect related devices as well.</p>

<p>The simulator acts as both an agent and an adapter monitoring an external device and
taking actions based on the state and commands. A commandline is also provided to 
allow for actions to be sent that are not initiated by an external device.</p>

<h2 id="running-cnc-simulator">Running CNC Simulator</h2>

<p>The CNC simulator requires ruby 1.9.x and the statemachine gem. Install
ruby and the type</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">gem install statemachine
</code></pre></div>
<p>Once you have installed the ruby gem you can use a pre-compiled agent with
the agent.cfg file and the BothDevices.xml to represent a CNC and a robot.
There is a robot response file which just goes through a series of pre-canned
actions and will drive some states on the simulator.</p>

<p>To run the CNC simulator, cd to the simulator directory and start the agent
(assuming it is in the same simulator directory):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">./agent debug
</code></pre></div>
<p>Next start the CNC simulator:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ruby cnc_simulator.rb
</code></pre></div>
<p>You will need to type the following commands to enable the cnc, the first puts
it in automatic mode and the second enables the link:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">auto
enable
</code></pre></div>
<p>Next you will need to start the robot sim:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ruby robot.rb
</code></pre></div>
<p>Within five seconds give the following command to the CNC:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">run
</code></pre></div>
<p>This process will be made simplier as the CNC becomes more complete. This is the
first step to a fully functioning sim.</p>

<h2 id="license">License</h2>

<p>Copyright 2012, System Insights, Inc.
All rights reserved.</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>

<h2 id="external-licenses">External Licenses</h2>

<p>We have included the scanner.py module Copyright (c) 2011, Mark Watkinson.
Additional licensing and copyright information are in the file: src/scanner.py.</p>
</div></body></html>

            
          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-electric">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>electric</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-diamondback">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>diamondback</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src="/js/distro_switch.js"></script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/rosindex">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">rosindex</span>
          </a>
          |
          <em>generated on 2015-01-30</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
