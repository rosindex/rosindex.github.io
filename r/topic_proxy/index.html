<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="http://rosindex.github.io/r/topic_proxy/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src="/js/jquery.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/jquery-cookie-1.4.1/jquery.cookie.js" type="text/javascript"></script>

    <script type="text/javascript" src="/js/ga.js" async></script>
    <script type="text/javascript" src="/js/toc.js"></script>

    <!-- Pre-fetch search index files -->
    
    
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">


        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/rosindex/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="divider"></li>

                    <li class="disabled"><a href="/srvs/">Nodes</a></li>
                    <li class="disabled"><a href="/msgs/">Messages</a></li>
                    <li class="disabled"><a href="/srvs/">Services</a></li>
                    <li class="disabled"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li class="disabled"><a href="/categories/">Categories</a></li>
                    <li class="disabled"><a href="/tutorials">Tutorials</a></li>
                    <li class="disabled"><a href="/readmes">Readmes</a></li>
                    <li class="disabled"><a href="/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form action="/search/" role="form">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="q" placeholder="Search">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" type="submit"><span class="glyphicon glyphicon-search"></span></button>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">topic_proxy</li>
        <!--<li class="active">topic_proxy</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="kinetic-option" class="distro-button btn btn-xs btn-default" href="#kinetic" data="kinetic">
      <input type="radio" name="options" id="kinetic-radio" autocomplete="off"> kinetic
    </label>
  
    <label id="jade-option" class="distro-button btn btn-xs btn-primary" href="#jade" data="jade">
      <input type="radio" name="options" id="jade-radio" autocomplete="off"> jade
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-primary" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  
    <label id="hydro-option" class="distro-button btn btn-xs btn-primary" href="#hydro" data="hydro">
      <input type="radio" name="options" id="hydro-radio" autocomplete="off"> hydro
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="groovy" id="groovy-option" class=" older-distro-option"  href="#groovy">
          <a href="#groovy" data="groovy" id="groovy-button">groovy</a>
        </li>
      
        <li data="fuerte" id="fuerte-option" class="disabled older-distro-option"  href="#fuerte">
          <a href="#fuerte" data="fuerte" id="fuerte-button">fuerte</a>
        </li>
      
        <li data="electric" id="electric-option" class="disabled older-distro-option"  href="#electric">
          <a href="#electric" data="electric" id="electric-button">electric</a>
        </li>
      
        <li data="diamondback" id="diamondback-option" class="disabled older-distro-option"  href="#diamondback">
          <a href="#diamondback" data="diamondback" id="diamondback-button">diamondback</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/topic_proxy">topic_proxy</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/topic_proxy"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tu-darmstadt-ros-pkg-topic_proxy
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tu-darmstadt-ros-pkg-topic_proxy" role="menuitem" tabindex="-1" href="/r/topic_proxy/github-tu-darmstadt-ros-pkg-topic_proxy" data="github-tu-darmstadt-ros-pkg-topic_proxy">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tu-darmstadt-ros-pkg-topic_proxy
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-kinetic">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>kinetic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jade">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy.git">https://github.com/tu-darmstadt-ros-pkg/topic_proxy.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2014-08-28
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/blob/github-tu-darmstadt-ros-pkg-topic_proxy">blob</a></td>
                    <td>0.1.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/topic_proxy/github-tu-darmstadt-ros-pkg-topic_proxy">topic_proxy</a></td>
                    <td>0.1.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h1 id="topic_proxy">topic_proxy</h1>

<p>topic_proxy implements a ROS service server and client to pull single messages from one master and optionally
to republish them locally.</p>

<p>The package provides three targets:</p>

<ul>
<li>A server node that runs on the foreign master (usually the robot) and serves requests from clients.</li>
</ul>

<p>The TCP connection manager binds to a fixed port so that the client does not have to lookup the connection
  information at the foreign master (default port is 11322).</p>

<p>Note: If you want to restart the server node you have to wait for approximately 1-2 minutes until the old
  socket listener transitions from TIME_WAIT to CLOSED state. Otherwise you will get an "Address already in use" error.
  The roscpp connection manager does not set the SO_REUSEADDR socket option. This problem is known as the "TCP TIME_WAIT
  problem".</p>

<ul>
<li>A client library named libtopic_proxy.so.</li>
</ul>

<p>The client library provides a high-level class interface for getting and publishing messages from a server. The most
  important public member functions are</p>
<div class="highlight"><pre><code class="language-" data-lang="">    template &lt;class M&gt; boost::shared_ptr&lt;const M&gt; getMessage(string topic, Duration timeout, bool compressed);
    template &lt;class M&gt; void publishMessage(M message, string topic, bool compressed);
</code></pre></div>
<p>which wrap the request into service calls.</p>

<ul>
<li>A client node that is built on top of the topic_proxy library and republishes or subscribes topics on the client side
on behalf of the server.</li>
</ul>

<p>The client can be configured either via the parameter server (see
  <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/launch/client.launch">client.launch</a> file for a simple example)
  or by using service calls to request single messages or to configure the subscribers and publishers.</p>

<p>If you want to connect to multiple servers (robots), you can run multiple clients in different namespaces.</p>

<h2 id="services">Services</h2>

<h3 id="server-side">Server side:</h3>

<ul>
<li>
<code>/get_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/GetMessage.srv">topic_proxy/GetMessage</a>)</li>
</ul>

<p>Retrieve a single message from the server. The server will create a new subscriber if no one exists for the
  specified topic.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:      Name of topic to subscribe at the server.</li>
<li>
<code>bool compressed</code>:   If true, the message instance in the response is compressed using bzip2 compression.</li>
<li>
<p><code>duration timeout</code>:  Time to wait for a new message, if no message has been received yet. If timeout is zero,
                      the last received message is returned without waiting.</p>

<ul>
<li>
<code>/publish_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/PublishMessage.srv">topic_proxy/PublishMessage</a>)</li>
</ul>
</li>
</ul>

<p>Publish a message at the server. The server creates a new publisher if no one exists for the specified topic.</p>

<p>Request parameters:</p>
<div class="highlight"><pre><code class="language-" data-lang="">* `MessageInstance message`:     The message instance to publish.
* `bool latch`:                  If true, the topic will be latched.
</code></pre></div>
<h3 id="client-side">Client side:</h3>

<ul>
<li>
<code>request_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/RequestMessage.srv">topic_proxy/RequestMessage</a>)</li>
</ul>

<p>Adds a new publisher at the client side (or modify the properties of an existing one). The client internally
  uses <code>/get_message</code> calls to retrieve messages from the server and republishes them locally.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:      Name of the topic to subscribe at the server. The local topic is prefixed by
                      the value of the string parameter <code>topic_prefix</code> for the client.</li>
<li>
<code>bool compressed</code>:   see <code>/get_message</code>
</li>
<li>
<code>duration timeout</code>:  see <code>/get_message</code>
</li>
<li>
<code>duration interval</code>: If &gt;0, the client starts a timer to fetch messages periodically from the server.
                      If =0, a single message is retrieved and published. The service call will block
                      until the message is received and published.
                      If &lt;=0 and there is an active timer for this topic, the timer will be stopped.</li>
<li>
<p><code>bool latch</code>:        If true, the topic will be latched locally.</p>

<ul>
<li>
<code>add_publisher</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/AddPublisher.srv">topic_proxy/AddPublisher</a>)</li>
</ul>
</li>
</ul>

<p>Adds a new subscriber at the client side. The client forwards each incoming message to the server using a
  <code>/publish_message</code> call internally.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:       Name of the topic to advertise at the server. The local topic is prefixed by
                      the value of the string parameter <code>topic_prefix</code> for the client.</li>
<li>
<code>bool compressed</code>:    If true, all outgoing messages will be transferred compressed using bzip2 compression.</li>
<li>
<code>bool latch</code>:         If true, the topic will be latched at the server.</li>
</ul>

<p>Note that you do not have to specify the message type. The first message that is reveived by the local subscriber
  will specify the message type and create the publisher at the server side. The first message sent from the client
  may therefore be missed by subscribers on the server side, as it takes some time for the connections to be
  established after the new publisher is created.</p>

<h2 id="example">Example</h2>

<p>At the server:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic pub /chatter std_msgs/String "hello" -r 1 &amp;
rosrun topic_proxy server
</code></pre></div>
<p>At the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">ROS_NAMESPACE=client rosrun topic_proxy client [&lt;host&gt; [&lt;port&gt;]]
</code></pre></div>
<p>You have to use namespaces or the <code>topic_prefix</code> parameter if the client and server are using the same ROS master.</p>

<p>Then request a message from the server using</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/request_message '{ topic: chatter }'
</code></pre></div>
<p>This will create a publisher on <code>/client/chatter</code> at the client and a subscriber on <code>/chatter</code> at the server. Only
one message is retrieved (interval parameter defaults to zero). If you want to poll the server periodically, specify
an interval:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/request_message '{ topic: chatter, interval: 1000000000 }'   # polls once a second
</code></pre></div>
<p>You can now listen to the server's chatter topic at the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic echo /client/chatter
</code></pre></div>
<p>To publish a response, call the <code>add_publiher</code> server to create a local subscriber:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/add_publisher '{ topic: chatter_response }'
</code></pre></div>
<p>The server-side publisher will be created once a message is received from the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic pub /client/chatter_response std_msgs/String "world" -r 1 &amp;
</code></pre></div>
<p>The server will republish this message as <code>chatter</code> in his local namespace.</p>

<p>See <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/launch/client.launch">client.launch</a> launch file in the topic_proxy package for a launch file example that does the same setup using
ROS parameters.</p>

<h1 id="blob_tools">blob_tools</h1>

<p>blob provides a new message type blob/Blob for binary data.</p>

<p>Currently, only <a href="http://www.ros.org/wiki/roscpp">roscpp</a> is supported.
Other client libraries like <a href="http://www.ros.org/wiki/rospy">rospy</a> will serialize/deserialize blob data as uint8[],
as defined in the <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/blob/msg/Blob.msg">message definition</a>.</p>

<h2 id="usage-example">Usage Example</h2>

<p>MyMessage.msg:</p>
<div class="highlight"><pre><code class="language-" data-lang="">blob/Blob map_blob      # a serialized (and compressed) nav_msgs/OccupancyGridMap
</code></pre></div>
<p>Publisher:</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">MyMessage</span><span class="w"> </span><span class="err">temp;</span><span class="w">
    </span><span class="err">nav_msgs::OccupancyGridMap</span><span class="w"> </span><span class="err">my_map;</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">temp.map_blob.serialize(my_map);</span><span class="w">
    </span><span class="err">temp.map_blob.setCompressed(true);</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">enable</span><span class="w"> </span><span class="err">compression</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">publisher.publish(temp);</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Subscriber:</p>
<div class="highlight"><pre><code class="language-" data-lang="">void callback(const MyMessageConstPtr&amp; msg)
{
    // WARNING: instantiation of the "wrong" data type may result in non-sense data and/or StreamOverrunExceptions
    // blob/Blob is not type-safe!
    nav_msgs::OccupancyGridMapPtr my_map = msg-&gt;map_blob.instantiate&lt;nav_msgs::OccupancyGridMap&gt;();

    if (my_map) {
        ....
    }
}
</code></pre></div>
</div></body></html>

            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy.git">https://github.com/tu-darmstadt-ros-pkg/topic_proxy.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2014-08-28
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/blob/github-tu-darmstadt-ros-pkg-topic_proxy">blob</a></td>
                    <td>0.1.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/topic_proxy/github-tu-darmstadt-ros-pkg-topic_proxy">topic_proxy</a></td>
                    <td>0.1.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h1 id="topic_proxy">topic_proxy</h1>

<p>topic_proxy implements a ROS service server and client to pull single messages from one master and optionally
to republish them locally.</p>

<p>The package provides three targets:</p>

<ul>
<li>A server node that runs on the foreign master (usually the robot) and serves requests from clients.</li>
</ul>

<p>The TCP connection manager binds to a fixed port so that the client does not have to lookup the connection
  information at the foreign master (default port is 11322).</p>

<p>Note: If you want to restart the server node you have to wait for approximately 1-2 minutes until the old
  socket listener transitions from TIME_WAIT to CLOSED state. Otherwise you will get an "Address already in use" error.
  The roscpp connection manager does not set the SO_REUSEADDR socket option. This problem is known as the "TCP TIME_WAIT
  problem".</p>

<ul>
<li>A client library named libtopic_proxy.so.</li>
</ul>

<p>The client library provides a high-level class interface for getting and publishing messages from a server. The most
  important public member functions are</p>
<div class="highlight"><pre><code class="language-" data-lang="">    template &lt;class M&gt; boost::shared_ptr&lt;const M&gt; getMessage(string topic, Duration timeout, bool compressed);
    template &lt;class M&gt; void publishMessage(M message, string topic, bool compressed);
</code></pre></div>
<p>which wrap the request into service calls.</p>

<ul>
<li>A client node that is built on top of the topic_proxy library and republishes or subscribes topics on the client side
on behalf of the server.</li>
</ul>

<p>The client can be configured either via the parameter server (see
  <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/launch/client.launch">client.launch</a> file for a simple example)
  or by using service calls to request single messages or to configure the subscribers and publishers.</p>

<p>If you want to connect to multiple servers (robots), you can run multiple clients in different namespaces.</p>

<h2 id="services">Services</h2>

<h3 id="server-side">Server side:</h3>

<ul>
<li>
<code>/get_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/GetMessage.srv">topic_proxy/GetMessage</a>)</li>
</ul>

<p>Retrieve a single message from the server. The server will create a new subscriber if no one exists for the
  specified topic.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:      Name of topic to subscribe at the server.</li>
<li>
<code>bool compressed</code>:   If true, the message instance in the response is compressed using bzip2 compression.</li>
<li>
<p><code>duration timeout</code>:  Time to wait for a new message, if no message has been received yet. If timeout is zero,
                      the last received message is returned without waiting.</p>

<ul>
<li>
<code>/publish_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/PublishMessage.srv">topic_proxy/PublishMessage</a>)</li>
</ul>
</li>
</ul>

<p>Publish a message at the server. The server creates a new publisher if no one exists for the specified topic.</p>

<p>Request parameters:</p>
<div class="highlight"><pre><code class="language-" data-lang="">* `MessageInstance message`:     The message instance to publish.
* `bool latch`:                  If true, the topic will be latched.
</code></pre></div>
<h3 id="client-side">Client side:</h3>

<ul>
<li>
<code>request_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/RequestMessage.srv">topic_proxy/RequestMessage</a>)</li>
</ul>

<p>Adds a new publisher at the client side (or modify the properties of an existing one). The client internally
  uses <code>/get_message</code> calls to retrieve messages from the server and republishes them locally.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:      Name of the topic to subscribe at the server. The local topic is prefixed by
                      the value of the string parameter <code>topic_prefix</code> for the client.</li>
<li>
<code>bool compressed</code>:   see <code>/get_message</code>
</li>
<li>
<code>duration timeout</code>:  see <code>/get_message</code>
</li>
<li>
<code>duration interval</code>: If &gt;0, the client starts a timer to fetch messages periodically from the server.
                      If =0, a single message is retrieved and published. The service call will block
                      until the message is received and published.
                      If &lt;=0 and there is an active timer for this topic, the timer will be stopped.</li>
<li>
<p><code>bool latch</code>:        If true, the topic will be latched locally.</p>

<ul>
<li>
<code>add_publisher</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/AddPublisher.srv">topic_proxy/AddPublisher</a>)</li>
</ul>
</li>
</ul>

<p>Adds a new subscriber at the client side. The client forwards each incoming message to the server using a
  <code>/publish_message</code> call internally.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:       Name of the topic to advertise at the server. The local topic is prefixed by
                      the value of the string parameter <code>topic_prefix</code> for the client.</li>
<li>
<code>bool compressed</code>:    If true, all outgoing messages will be transferred compressed using bzip2 compression.</li>
<li>
<code>bool latch</code>:         If true, the topic will be latched at the server.</li>
</ul>

<p>Note that you do not have to specify the message type. The first message that is reveived by the local subscriber
  will specify the message type and create the publisher at the server side. The first message sent from the client
  may therefore be missed by subscribers on the server side, as it takes some time for the connections to be
  established after the new publisher is created.</p>

<h2 id="example">Example</h2>

<p>At the server:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic pub /chatter std_msgs/String "hello" -r 1 &amp;
rosrun topic_proxy server
</code></pre></div>
<p>At the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">ROS_NAMESPACE=client rosrun topic_proxy client [&lt;host&gt; [&lt;port&gt;]]
</code></pre></div>
<p>You have to use namespaces or the <code>topic_prefix</code> parameter if the client and server are using the same ROS master.</p>

<p>Then request a message from the server using</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/request_message '{ topic: chatter }'
</code></pre></div>
<p>This will create a publisher on <code>/client/chatter</code> at the client and a subscriber on <code>/chatter</code> at the server. Only
one message is retrieved (interval parameter defaults to zero). If you want to poll the server periodically, specify
an interval:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/request_message '{ topic: chatter, interval: 1000000000 }'   # polls once a second
</code></pre></div>
<p>You can now listen to the server's chatter topic at the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic echo /client/chatter
</code></pre></div>
<p>To publish a response, call the <code>add_publiher</code> server to create a local subscriber:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/add_publisher '{ topic: chatter_response }'
</code></pre></div>
<p>The server-side publisher will be created once a message is received from the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic pub /client/chatter_response std_msgs/String "world" -r 1 &amp;
</code></pre></div>
<p>The server will republish this message as <code>chatter</code> in his local namespace.</p>

<p>See <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/launch/client.launch">client.launch</a> launch file in the topic_proxy package for a launch file example that does the same setup using
ROS parameters.</p>

<h1 id="blob_tools">blob_tools</h1>

<p>blob provides a new message type blob/Blob for binary data.</p>

<p>Currently, only <a href="http://www.ros.org/wiki/roscpp">roscpp</a> is supported.
Other client libraries like <a href="http://www.ros.org/wiki/rospy">rospy</a> will serialize/deserialize blob data as uint8[],
as defined in the <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/blob/msg/Blob.msg">message definition</a>.</p>

<h2 id="usage-example">Usage Example</h2>

<p>MyMessage.msg:</p>
<div class="highlight"><pre><code class="language-" data-lang="">blob/Blob map_blob      # a serialized (and compressed) nav_msgs/OccupancyGridMap
</code></pre></div>
<p>Publisher:</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">MyMessage</span><span class="w"> </span><span class="err">temp;</span><span class="w">
    </span><span class="err">nav_msgs::OccupancyGridMap</span><span class="w"> </span><span class="err">my_map;</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">temp.map_blob.serialize(my_map);</span><span class="w">
    </span><span class="err">temp.map_blob.setCompressed(true);</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">enable</span><span class="w"> </span><span class="err">compression</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">publisher.publish(temp);</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Subscriber:</p>
<div class="highlight"><pre><code class="language-" data-lang="">void callback(const MyMessageConstPtr&amp; msg)
{
    // WARNING: instantiation of the "wrong" data type may result in non-sense data and/or StreamOverrunExceptions
    // blob/Blob is not type-safe!
    nav_msgs::OccupancyGridMapPtr my_map = msg-&gt;map_blob.instantiate&lt;nav_msgs::OccupancyGridMap&gt;();

    if (my_map) {
        ....
    }
}
</code></pre></div>
</div></body></html>

            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy.git">https://github.com/tu-darmstadt-ros-pkg/topic_proxy.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2014-08-28
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/blob/github-tu-darmstadt-ros-pkg-topic_proxy">blob</a></td>
                    <td>0.1.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/topic_proxy/github-tu-darmstadt-ros-pkg-topic_proxy">topic_proxy</a></td>
                    <td>0.1.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h1 id="topic_proxy">topic_proxy</h1>

<p>topic_proxy implements a ROS service server and client to pull single messages from one master and optionally
to republish them locally.</p>

<p>The package provides three targets:</p>

<ul>
<li>A server node that runs on the foreign master (usually the robot) and serves requests from clients.</li>
</ul>

<p>The TCP connection manager binds to a fixed port so that the client does not have to lookup the connection
  information at the foreign master (default port is 11322).</p>

<p>Note: If you want to restart the server node you have to wait for approximately 1-2 minutes until the old
  socket listener transitions from TIME_WAIT to CLOSED state. Otherwise you will get an "Address already in use" error.
  The roscpp connection manager does not set the SO_REUSEADDR socket option. This problem is known as the "TCP TIME_WAIT
  problem".</p>

<ul>
<li>A client library named libtopic_proxy.so.</li>
</ul>

<p>The client library provides a high-level class interface for getting and publishing messages from a server. The most
  important public member functions are</p>
<div class="highlight"><pre><code class="language-" data-lang="">    template &lt;class M&gt; boost::shared_ptr&lt;const M&gt; getMessage(string topic, Duration timeout, bool compressed);
    template &lt;class M&gt; void publishMessage(M message, string topic, bool compressed);
</code></pre></div>
<p>which wrap the request into service calls.</p>

<ul>
<li>A client node that is built on top of the topic_proxy library and republishes or subscribes topics on the client side
on behalf of the server.</li>
</ul>

<p>The client can be configured either via the parameter server (see
  <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/launch/client.launch">client.launch</a> file for a simple example)
  or by using service calls to request single messages or to configure the subscribers and publishers.</p>

<p>If you want to connect to multiple servers (robots), you can run multiple clients in different namespaces.</p>

<h2 id="services">Services</h2>

<h3 id="server-side">Server side:</h3>

<ul>
<li>
<code>/get_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/GetMessage.srv">topic_proxy/GetMessage</a>)</li>
</ul>

<p>Retrieve a single message from the server. The server will create a new subscriber if no one exists for the
  specified topic.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:      Name of topic to subscribe at the server.</li>
<li>
<code>bool compressed</code>:   If true, the message instance in the response is compressed using bzip2 compression.</li>
<li>
<p><code>duration timeout</code>:  Time to wait for a new message, if no message has been received yet. If timeout is zero,
                      the last received message is returned without waiting.</p>

<ul>
<li>
<code>/publish_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/PublishMessage.srv">topic_proxy/PublishMessage</a>)</li>
</ul>
</li>
</ul>

<p>Publish a message at the server. The server creates a new publisher if no one exists for the specified topic.</p>

<p>Request parameters:</p>
<div class="highlight"><pre><code class="language-" data-lang="">* `MessageInstance message`:     The message instance to publish.
* `bool latch`:                  If true, the topic will be latched.
</code></pre></div>
<h3 id="client-side">Client side:</h3>

<ul>
<li>
<code>request_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/RequestMessage.srv">topic_proxy/RequestMessage</a>)</li>
</ul>

<p>Adds a new publisher at the client side (or modify the properties of an existing one). The client internally
  uses <code>/get_message</code> calls to retrieve messages from the server and republishes them locally.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:      Name of the topic to subscribe at the server. The local topic is prefixed by
                      the value of the string parameter <code>topic_prefix</code> for the client.</li>
<li>
<code>bool compressed</code>:   see <code>/get_message</code>
</li>
<li>
<code>duration timeout</code>:  see <code>/get_message</code>
</li>
<li>
<code>duration interval</code>: If &gt;0, the client starts a timer to fetch messages periodically from the server.
                      If =0, a single message is retrieved and published. The service call will block
                      until the message is received and published.
                      If &lt;=0 and there is an active timer for this topic, the timer will be stopped.</li>
<li>
<p><code>bool latch</code>:        If true, the topic will be latched locally.</p>

<ul>
<li>
<code>add_publisher</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/AddPublisher.srv">topic_proxy/AddPublisher</a>)</li>
</ul>
</li>
</ul>

<p>Adds a new subscriber at the client side. The client forwards each incoming message to the server using a
  <code>/publish_message</code> call internally.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:       Name of the topic to advertise at the server. The local topic is prefixed by
                      the value of the string parameter <code>topic_prefix</code> for the client.</li>
<li>
<code>bool compressed</code>:    If true, all outgoing messages will be transferred compressed using bzip2 compression.</li>
<li>
<code>bool latch</code>:         If true, the topic will be latched at the server.</li>
</ul>

<p>Note that you do not have to specify the message type. The first message that is reveived by the local subscriber
  will specify the message type and create the publisher at the server side. The first message sent from the client
  may therefore be missed by subscribers on the server side, as it takes some time for the connections to be
  established after the new publisher is created.</p>

<h2 id="example">Example</h2>

<p>At the server:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic pub /chatter std_msgs/String "hello" -r 1 &amp;
rosrun topic_proxy server
</code></pre></div>
<p>At the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">ROS_NAMESPACE=client rosrun topic_proxy client [&lt;host&gt; [&lt;port&gt;]]
</code></pre></div>
<p>You have to use namespaces or the <code>topic_prefix</code> parameter if the client and server are using the same ROS master.</p>

<p>Then request a message from the server using</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/request_message '{ topic: chatter }'
</code></pre></div>
<p>This will create a publisher on <code>/client/chatter</code> at the client and a subscriber on <code>/chatter</code> at the server. Only
one message is retrieved (interval parameter defaults to zero). If you want to poll the server periodically, specify
an interval:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/request_message '{ topic: chatter, interval: 1000000000 }'   # polls once a second
</code></pre></div>
<p>You can now listen to the server's chatter topic at the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic echo /client/chatter
</code></pre></div>
<p>To publish a response, call the <code>add_publiher</code> server to create a local subscriber:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/add_publisher '{ topic: chatter_response }'
</code></pre></div>
<p>The server-side publisher will be created once a message is received from the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic pub /client/chatter_response std_msgs/String "world" -r 1 &amp;
</code></pre></div>
<p>The server will republish this message as <code>chatter</code> in his local namespace.</p>

<p>See <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/launch/client.launch">client.launch</a> launch file in the topic_proxy package for a launch file example that does the same setup using
ROS parameters.</p>

<h1 id="blob_tools">blob_tools</h1>

<p>blob provides a new message type blob/Blob for binary data.</p>

<p>Currently, only <a href="http://www.ros.org/wiki/roscpp">roscpp</a> is supported.
Other client libraries like <a href="http://www.ros.org/wiki/rospy">rospy</a> will serialize/deserialize blob data as uint8[],
as defined in the <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/blob/msg/Blob.msg">message definition</a>.</p>

<h2 id="usage-example">Usage Example</h2>

<p>MyMessage.msg:</p>
<div class="highlight"><pre><code class="language-" data-lang="">blob/Blob map_blob      # a serialized (and compressed) nav_msgs/OccupancyGridMap
</code></pre></div>
<p>Publisher:</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">MyMessage</span><span class="w"> </span><span class="err">temp;</span><span class="w">
    </span><span class="err">nav_msgs::OccupancyGridMap</span><span class="w"> </span><span class="err">my_map;</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">temp.map_blob.serialize(my_map);</span><span class="w">
    </span><span class="err">temp.map_blob.setCompressed(true);</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">enable</span><span class="w"> </span><span class="err">compression</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">publisher.publish(temp);</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Subscriber:</p>
<div class="highlight"><pre><code class="language-" data-lang="">void callback(const MyMessageConstPtr&amp; msg)
{
    // WARNING: instantiation of the "wrong" data type may result in non-sense data and/or StreamOverrunExceptions
    // blob/Blob is not type-safe!
    nav_msgs::OccupancyGridMapPtr my_map = msg-&gt;map_blob.instantiate&lt;nav_msgs::OccupancyGridMap&gt;();

    if (my_map) {
        ....
    }
}
</code></pre></div>
</div></body></html>

            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-groovy">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy.git">https://github.com/tu-darmstadt-ros-pkg/topic_proxy.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2014-08-28
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/blob/github-tu-darmstadt-ros-pkg-topic_proxy">blob</a></td>
                    <td>0.1.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/topic_proxy/github-tu-darmstadt-ros-pkg-topic_proxy">topic_proxy</a></td>
                    <td>0.1.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h1 id="topic_proxy">topic_proxy</h1>

<p>topic_proxy implements a ROS service server and client to pull single messages from one master and optionally
to republish them locally.</p>

<p>The package provides three targets:</p>

<ul>
<li>A server node that runs on the foreign master (usually the robot) and serves requests from clients.</li>
</ul>

<p>The TCP connection manager binds to a fixed port so that the client does not have to lookup the connection
  information at the foreign master (default port is 11322).</p>

<p>Note: If you want to restart the server node you have to wait for approximately 1-2 minutes until the old
  socket listener transitions from TIME_WAIT to CLOSED state. Otherwise you will get an "Address already in use" error.
  The roscpp connection manager does not set the SO_REUSEADDR socket option. This problem is known as the "TCP TIME_WAIT
  problem".</p>

<ul>
<li>A client library named libtopic_proxy.so.</li>
</ul>

<p>The client library provides a high-level class interface for getting and publishing messages from a server. The most
  important public member functions are</p>
<div class="highlight"><pre><code class="language-" data-lang="">    template &lt;class M&gt; boost::shared_ptr&lt;const M&gt; getMessage(string topic, Duration timeout, bool compressed);
    template &lt;class M&gt; void publishMessage(M message, string topic, bool compressed);
</code></pre></div>
<p>which wrap the request into service calls.</p>

<ul>
<li>A client node that is built on top of the topic_proxy library and republishes or subscribes topics on the client side
on behalf of the server.</li>
</ul>

<p>The client can be configured either via the parameter server (see
  <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/launch/client.launch">client.launch</a> file for a simple example)
  or by using service calls to request single messages or to configure the subscribers and publishers.</p>

<p>If you want to connect to multiple servers (robots), you can run multiple clients in different namespaces.</p>

<h2 id="services">Services</h2>

<h3 id="server-side">Server side:</h3>

<ul>
<li>
<code>/get_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/GetMessage.srv">topic_proxy/GetMessage</a>)</li>
</ul>

<p>Retrieve a single message from the server. The server will create a new subscriber if no one exists for the
  specified topic.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:      Name of topic to subscribe at the server.</li>
<li>
<code>bool compressed</code>:   If true, the message instance in the response is compressed using bzip2 compression.</li>
<li>
<p><code>duration timeout</code>:  Time to wait for a new message, if no message has been received yet. If timeout is zero,
                      the last received message is returned without waiting.</p>

<ul>
<li>
<code>/publish_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/PublishMessage.srv">topic_proxy/PublishMessage</a>)</li>
</ul>
</li>
</ul>

<p>Publish a message at the server. The server creates a new publisher if no one exists for the specified topic.</p>

<p>Request parameters:</p>
<div class="highlight"><pre><code class="language-" data-lang="">* `MessageInstance message`:     The message instance to publish.
* `bool latch`:                  If true, the topic will be latched.
</code></pre></div>
<h3 id="client-side">Client side:</h3>

<ul>
<li>
<code>request_message</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/RequestMessage.srv">topic_proxy/RequestMessage</a>)</li>
</ul>

<p>Adds a new publisher at the client side (or modify the properties of an existing one). The client internally
  uses <code>/get_message</code> calls to retrieve messages from the server and republishes them locally.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:      Name of the topic to subscribe at the server. The local topic is prefixed by
                      the value of the string parameter <code>topic_prefix</code> for the client.</li>
<li>
<code>bool compressed</code>:   see <code>/get_message</code>
</li>
<li>
<code>duration timeout</code>:  see <code>/get_message</code>
</li>
<li>
<code>duration interval</code>: If &gt;0, the client starts a timer to fetch messages periodically from the server.
                      If =0, a single message is retrieved and published. The service call will block
                      until the message is received and published.
                      If &lt;=0 and there is an active timer for this topic, the timer will be stopped.</li>
<li>
<p><code>bool latch</code>:        If true, the topic will be latched locally.</p>

<ul>
<li>
<code>add_publisher</code> (<a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/srv/AddPublisher.srv">topic_proxy/AddPublisher</a>)</li>
</ul>
</li>
</ul>

<p>Adds a new subscriber at the client side. The client forwards each incoming message to the server using a
  <code>/publish_message</code> call internally.</p>

<p>Request parameters:</p>

<ul>
<li>
<code>string topic</code>:       Name of the topic to advertise at the server. The local topic is prefixed by
                      the value of the string parameter <code>topic_prefix</code> for the client.</li>
<li>
<code>bool compressed</code>:    If true, all outgoing messages will be transferred compressed using bzip2 compression.</li>
<li>
<code>bool latch</code>:         If true, the topic will be latched at the server.</li>
</ul>

<p>Note that you do not have to specify the message type. The first message that is reveived by the local subscriber
  will specify the message type and create the publisher at the server side. The first message sent from the client
  may therefore be missed by subscribers on the server side, as it takes some time for the connections to be
  established after the new publisher is created.</p>

<h2 id="example">Example</h2>

<p>At the server:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic pub /chatter std_msgs/String "hello" -r 1 &amp;
rosrun topic_proxy server
</code></pre></div>
<p>At the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">ROS_NAMESPACE=client rosrun topic_proxy client [&lt;host&gt; [&lt;port&gt;]]
</code></pre></div>
<p>You have to use namespaces or the <code>topic_prefix</code> parameter if the client and server are using the same ROS master.</p>

<p>Then request a message from the server using</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/request_message '{ topic: chatter }'
</code></pre></div>
<p>This will create a publisher on <code>/client/chatter</code> at the client and a subscriber on <code>/chatter</code> at the server. Only
one message is retrieved (interval parameter defaults to zero). If you want to poll the server periodically, specify
an interval:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/request_message '{ topic: chatter, interval: 1000000000 }'   # polls once a second
</code></pre></div>
<p>You can now listen to the server's chatter topic at the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic echo /client/chatter
</code></pre></div>
<p>To publish a response, call the <code>add_publiher</code> server to create a local subscriber:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosservice call /client/add_publisher '{ topic: chatter_response }'
</code></pre></div>
<p>The server-side publisher will be created once a message is received from the client:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rostopic pub /client/chatter_response std_msgs/String "world" -r 1 &amp;
</code></pre></div>
<p>The server will republish this message as <code>chatter</code> in his local namespace.</p>

<p>See <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/topic_proxy/launch/client.launch">client.launch</a> launch file in the topic_proxy package for a launch file example that does the same setup using
ROS parameters.</p>

<h1 id="blob_tools">blob_tools</h1>

<p>blob provides a new message type blob/Blob for binary data.</p>

<p>Currently, only <a href="http://www.ros.org/wiki/roscpp">roscpp</a> is supported.
Other client libraries like <a href="http://www.ros.org/wiki/rospy">rospy</a> will serialize/deserialize blob data as uint8[],
as defined in the <a href="https://github.com/tu-darmstadt-ros-pkg/topic_proxy/blob/master/blob/msg/Blob.msg">message definition</a>.</p>

<h2 id="usage-example">Usage Example</h2>

<p>MyMessage.msg:</p>
<div class="highlight"><pre><code class="language-" data-lang="">blob/Blob map_blob      # a serialized (and compressed) nav_msgs/OccupancyGridMap
</code></pre></div>
<p>Publisher:</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">MyMessage</span><span class="w"> </span><span class="err">temp;</span><span class="w">
    </span><span class="err">nav_msgs::OccupancyGridMap</span><span class="w"> </span><span class="err">my_map;</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">temp.map_blob.serialize(my_map);</span><span class="w">
    </span><span class="err">temp.map_blob.setCompressed(true);</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">enable</span><span class="w"> </span><span class="err">compression</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">publisher.publish(temp);</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Subscriber:</p>
<div class="highlight"><pre><code class="language-" data-lang="">void callback(const MyMessageConstPtr&amp; msg)
{
    // WARNING: instantiation of the "wrong" data type may result in non-sense data and/or StreamOverrunExceptions
    // blob/Blob is not type-safe!
    nav_msgs::OccupancyGridMapPtr my_map = msg-&gt;map_blob.instantiate&lt;nav_msgs::OccupancyGridMap&gt;();

    if (my_map) {
        ....
    }
}
</code></pre></div>
</div></body></html>

            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-fuerte">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>fuerte</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-electric">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>electric</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-diamondback">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>diamondback</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src="/js/distro_switch.js"></script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/rosindex">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">rosindex</span>
          </a>
          |
          <em>generated on 2016-07-04</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
