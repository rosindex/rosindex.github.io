<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="http://rosindex.github.io/r/procrob_functional/github-procrob-procrob_functional/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src="/js/jquery.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/jquery-cookie-1.4.1/jquery.cookie.js" type="text/javascript"></script>

    <script type="text/javascript" src="/js/ga.js"></script>
    <script type="text/javascript" src="/js/toc.js"></script>

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">
      <div class="row">


        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/rosindex/rosindex.github.io/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <a class="btn btn-link" href="/about">About</a>
              <a class="btn btn-link" href="/packages">Packages</a>
              <a class="btn btn-link" href="/repos">Repos</a>
              <a class="btn btn-link" href="/contribute">Contribute</a>
              <a class="btn btn-link" href="/stats">Stats</a>
            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form action="/search/" role="form">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="q" placeholder="Search">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" type="submit"><span class="glyphicon glyphicon-search"></span></button>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">procrob_functional</li>
        <!--<li class="active">procrob_functional</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="jade-option" class="distro-button btn btn-xs btn-default" href="#jade" data="jade">
      <input type="radio" name="options" id="jade-radio" autocomplete="off"> jade
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-default" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  
    <label id="hydro-option" class="distro-button btn btn-xs btn-default" href="#hydro" data="hydro">
      <input type="radio" name="options" id="hydro-radio" autocomplete="off"> hydro
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="groovy" id="groovy-option" class="disabled older-distro-option"  href="#groovy">
          <a href="#groovy" data="groovy" id="groovy-button">groovy</a>
        </li>
      
        <li data="fuerte" id="fuerte-option" class="disabled older-distro-option"  href="#fuerte">
          <a href="#fuerte" data="fuerte" id="fuerte-button">fuerte</a>
        </li>
      
        <li data="electric" id="electric-option" class=" older-distro-option"  href="#electric">
          <a href="#electric" data="electric" id="electric-button">electric</a>
        </li>
      
        <li data="diamondback" id="diamondback-option" class="disabled older-distro-option"  href="#diamondback">
          <a href="#diamondback" data="diamondback" id="diamondback-button">diamondback</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/procrob_functional">procrob_functional</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/procrob_functional"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-procrob-procrob_functional
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-procrob-procrob_functional" role="menuitem" tabindex="-1" href="/r/procrob_functional/github-procrob-procrob_functional" data="github-procrob-procrob_functional">
                    <span class="glyphicon glyphicon-star"></span>
                    github-procrob-procrob_functional
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-jade">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>indigo</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>hydro</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-groovy">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>groovy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-fuerte">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>fuerte</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-electric">
    <div class="container-fluid">
      
        <div class="panel panel-default">
          
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="http://github.com/procrob/procrob_functional.git">http://github.com/procrob/procrob_functional.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">catkin</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2015-01-10
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNMAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/face_recognition/github-procrob-procrob_functional">face_recognition</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h3 id="copyright-2012-2014-pouyan-ziafati,-university-of-luxembourg">Copyright 2012-2014 Pouyan Ziafati, University of Luxembourg</h3>

<blockquote>
<ul>
<li>All image processing and face recognition functionalities are provided by utilizing the Shervin Emami's c++ source code for face recognition (<a href="http://www.shervinemami.info/faceRecognition.html">http://www.shervinemami.info/faceRecognition.html</a>).

<ul>
<li>License: Attribution-NonCommercial 3.0 Unported (<a href="http://creativecommons.org/licenses/by-nc/3.0/">http://creativecommons.org/licenses/by-nc/3.0/</a>) </li>
</ul>
</li>
</ul>
</blockquote>

<h2 id="welcome-to-face_recognition-package-for-ros">Welcome to face_recognition package for ROS</h2>

<p>The <strong>face_recognition</strong> ROS package provides an simple actionlib server interface for performing different face recognition functionalities in video stream.</p>

<h2 id="instalation">Instalation</h2>

<p>This instalation process is for <strong>catkin</strong> (ROS Groovy or newer version)
Assuming that your catkin workspace is under <strong>~/catkin_ws</strong>, if not replace <strong>~/catkin_ws</strong> with appropriate location. It also assumes you're running Bash shell, if you're running Zsh, source appropriate <strong>setup.zsh</strong> file.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd ~/catkin_ws/src
git clone https://github.com/procrob/procrob_functional.git --branch catkin
cd ~/catkin_ws
catkin_make
source ~/catkin_ws/devel/setup.bash
</code></pre></div>
<h3 id="facerecognitiongoal">FaceRecognitionGoal</h3>

<p>This message includes 2 fields: </p>

<ul>
<li>
<em>int</em> <strong>order_id</strong>
</li>
<li>
<em>string</em> <strong>order_argument</strong>
</li>
</ul>
<h3 id="the-face-recognition-actionlib-server-accepts-4-different-goals:">The face recognition actionlib server accepts 4 different goals:</h3>

<ul>
<li>
<p><strong>order_id</strong> = <strong>0</strong></p>

<ul>
<li>
<strong>(Recognize Once)</strong> Goal is to acknowledge the first face recognized in the video stream. When the first face is recognized with a confidence value higher than the desirable confidence threshold, the name of the person and the confidence value are sent back to the client as result.</li>
</ul>
</li>
<li>
<p><strong>order_id</strong> = <strong>1</strong></p>

<ul>
<li>
<strong>(Recognize Continuously)</strong> Goal is to continuously recognize faces in the video stream. Every face recognized with confidence value higher than the desirable confidence threshold and its confidence value are sent back to the client as feedback. This goal is persuaded for infinite time until it is canceled or preempted by another goal.</li>
</ul>
</li>
<li>
<p><strong>order_id</strong> = <strong>2</strong> <strong>and</strong> <strong>order_argument</strong> = <strong>person_name</strong></p>

<ul>
<li>
<strong>(Add face images)</strong> Goal is to acquire training images for a NEW person. The video stream is processed for detecting a face which is saved and used as a training image  for the new person. This process is continued until the desired number of training images for the new person is acquired. The name of the new person is provided as "order_argument"</li>
</ul>
</li>
<li>
<p><strong>order_id = 3</strong></p>

<ul>
<li>
<strong>(Train)</strong> The database is (re)trained from the training images</li>
</ul>
</li>
<li>
<p><strong>order_id = 4</strong></p>

<ul>
<li>
<strong>(Exit)</strong> The program exits.</li>
</ul>
</li>
</ul>
<h3 id="subscribed-topic:">Subscribed Topic:</h3>

<ul>
<li>
<strong>/camera/image_raw</strong>  -  video stream (standard ROS image transport)</li>
</ul>
<h2 id="parameters:">Parameters:</h2>

<ul>
<li>
<p><strong>confidence_value</strong> (<em>double</em>, default = 0.88) </p>

<ul>
<li>a face recognized with confidence value higher than the <strong>confidence_value</strong> threshold is accepted as valid.</li>
</ul>
</li>
<li>
<p><strong>show_screen_flag</strong> (<em>boolean</em>, default = true)</p>

<ul>
<li>if output screen is shown</li>
</ul>
</li>
<li>
<p><strong>add_face_number</strong> (int, default = 25)</p>

<ul>
<li>a parameter for the <strong>add_face_images</strong> goal which determines the number of training images for a new person to be acquired from the video stream </li>
</ul>
</li>
</ul>
<h2 id="how-the-face-recognition-works:">How The Face Recognition Works:</h2>

<p>Details in <a href="http://www.shervinemami.info/faceRecognition.html">http://www.shervinemami.info/faceRecognition.html</a></p>

<p>The name of persons and the images of their faces to train from are stored in the <strong>train.txt</strong> file.
This file should be in the same directory as where you execute the program. See the example train.txt file for the desirable format of the <strong>train.txt</strong> (Note: the person numbers start from 1, spaces or special characters are not allowed in persons' names). 
The program trains from the <strong>train.txt</strong> file and stores the eigenfaces data in <strong>facedata.xml</strong> file.</p>

<p>When the <strong>face_recognition</strong> actionlib server is executed (Fserver), the program first tries to load data from the <strong>facedata.xml</strong> file if exists, if not it will try to learn from training images stored in <strong>train.txt</strong> if any. You can always add training data directly from the video stream using the <strong>add_face_images</strong> goal (<strong>order_id</strong> = 2).
Note: when program retrains (<strong>order_id</strong> = 3), the content of facedata.xml is disregarded and the program trains only based on the train.txt file.</p>

<h2 id="tutorial:">Tutorial:</h2>

<p>For demonstration purposes an actionlib client example for the face_recognition simple actionlib server has been provided. 
The client subscribes to <strong>face_recognition/FRClientGoal</strong> messages. Each FRClientGoal message contains an <strong>order_id</strong> and an <strong>order_argument</strong> which specify a goal to be executed by the <strong>face_recognition</strong> server. After receiving a message, the client sends the corresponding goal to the server. By registering relevant call back functions, the client receives feedback and result information from the execution of goals in the server and prints such information on the terminal. </p>

<ul>
<li>Launch terminal

<ul>
<li>run <code>roscore</code>
</li>
<li>In separate terminal publish a video stream on topic <strong>/camera/image_raw</strong>.

<ul>
<li>For example you can use <strong>usb_cam</strong> to publish images from your web cam as follows:</li>
<li>Install <a href="http://wiki.ros.org/usb_cam">usb_cam</a> package</li>
<li>Run <code>rosrun usb_cam usb_cam_node usb_cam_node/image_raw:=camera/image_raw _image_height:=&lt;usb_cam_height&gt; _image_width:=&lt;usb_cam_width&gt;</code>
</li>
</ul>
</li>
</ul>
</li>
<li>In separate terminals run the face recognition server and client as follows:

<ul>
<li><code>rosrun face_recognition Fserver</code></li>
<li><code>rosrun face_recognition Fclient</code></li>
</ul>
</li>
<li>In another terminal publish messages on topic <strong>/fr_order</strong> to test different face recognition functionalities as follows: (notice the info which are printed on the client terminal after each command) 

<ul>
<li>
<code>rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 2 "your_name"</code>

<ul>
<li>to acquire training images for your face: you should try to appear in the video stream!</li>
</ul>
</li>
<li>
<code>rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 3 "none"</code>

<ul>
<li>to retrain and update the database, so that you can be recognized </li>
</ul>
</li>
<li>
<code>rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 1 "none"</code>

<ul>
<li>to recognize faces continuously. This would not stop until you preempt or cancel the goal. So lets preempt it by sending the next goal.</li>
</ul>
</li>
<li>
<code>rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 2 "your\_friend's\_name"</code><br><ul>
<li>add training images for a new person</li>
</ul>
</li>
<li>
<code>rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 0 "none"</code>

<ul>
<li>recognize once</li>
</ul>
</li>
<li>
<code>rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 1 "none"</code>

<ul>
<li>recognize continuous</li>
</ul>
</li>
<li>
<code>rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 4 "none"</code><br><ul>
<li>exit</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></body></html>

            
          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-diamondback">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>diamondback</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script src="/js/distro_switch.js"></script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/rosindex">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">rosindex</span>
          </a>
          |
          <em>generated on 2015-01-30</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
